(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1647:function(module,exports,__webpack_require__){module.exports={scalar:"ScalarVis_scalar__3FHGh"}},1648:function(module,exports,__webpack_require__){module.exports={root:"LineVis_root__39r6c"}},1654:function(module,exports,__webpack_require__){module.exports={root:"HeatmapVis_root__BKPci"}},1683:function(module,exports,__webpack_require__){__webpack_require__(1684),__webpack_require__(2084),__webpack_require__(2085),__webpack_require__(3161),__webpack_require__(3159),__webpack_require__(3163),__webpack_require__(3164),__webpack_require__(3162),__webpack_require__(3160),__webpack_require__(3165),__webpack_require__(3166),module.exports=__webpack_require__(3102)},17:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_DOMAIN})),__webpack_require__.d(__webpack_exports__,"b",(function(){return adaptedNumTicks})),__webpack_require__.d(__webpack_exports__,"e",(function(){return createAxisScale})),__webpack_require__.d(__webpack_exports__,"d",(function(){return computeVisSize})),__webpack_require__.d(__webpack_exports__,"o",(function(){return toArray})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getDomain})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getDomains})),__webpack_require__.d(__webpack_exports__,"f",(function(){return extendDomain})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getValueToIndexScale})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getCanvasScale})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getIntegerTicks})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getTickFormatter})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getCombinedDomain})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getBaseArray})),__webpack_require__.d(__webpack_exports__,"c",(function(){return applyMapping}));var _visx_scale__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(995),_visx_scale__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3172),_visx_scale__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3173),_visx_scale__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3174),d3_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3168),d3_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3167),d3_format__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3171),ndarray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(143),ndarray__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(ndarray__WEBPACK_IMPORTED_MODULE_7__),ndarray_ops__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1651),lodash_es__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3169),_models__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(18),_guards__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(49);const TICK_FORMAT=Object(d3_format__WEBPACK_IMPORTED_MODULE_6__.a)("0"),DEFAULT_DOMAIN=[.1,1],adaptedNumTicks=Object(_visx_scale__WEBPACK_IMPORTED_MODULE_0__.a)({domain:[300,900],range:[3,10],clamp:!0,round:!0}),adaptedLogTicksThreshold=Object(_visx_scale__WEBPACK_IMPORTED_MODULE_0__.a)({domain:[300,500],range:[.8,1.4]});function createAxisScale(config){const{type:type}=config;switch(type){case _models__WEBPACK_IMPORTED_MODULE_10__.b.Linear:return Object(_visx_scale__WEBPACK_IMPORTED_MODULE_0__.a)(config);case _models__WEBPACK_IMPORTED_MODULE_10__.b.Log:return Object(_visx_scale__WEBPACK_IMPORTED_MODULE_1__.a)(config);case _models__WEBPACK_IMPORTED_MODULE_10__.b.SymLog:return Object(_visx_scale__WEBPACK_IMPORTED_MODULE_2__.a)(config);default:throw new Error("Unknown type")}}function computeVisSize(availableSize,aspectRatio){const{width:width,height:height}=availableSize;if(width<=0&&height<=0)return;if(!aspectRatio)return availableSize;return width/aspectRatio>height?{width:height*aspectRatio,height:height}:{width:width,height:width/aspectRatio}}function getNewBounds(oldBounds,value){const[minBound,maxBound,minPositiveBound]=oldBounds;return[Math.min(value,minBound),Math.max(value,maxBound),value>0?Math.min(value,minPositiveBound):minPositiveBound]}function toArray(arr){return"data"in arr?arr.data:arr}function getDomain(valuesArray,scaleType=_models__WEBPACK_IMPORTED_MODULE_10__.b.Linear,errorArray){Object(_guards__WEBPACK_IMPORTED_MODULE_11__.d)(errorArray,valuesArray,"error");const values=toArray(valuesArray),errors=errorArray&&toArray(errorArray);if(0===values.length)return;const[min,max,positiveMin]=values.reduce((acc,val,i)=>{const newBounds=getNewBounds(acc,val),err=errors&&errors[i];return err?getNewBounds(getNewBounds(newBounds,val-err),val+err):newBounds},[values[0],values[0],1/0]);return scaleType!==_models__WEBPACK_IMPORTED_MODULE_10__.b.Log||min*max>0?[min,max]:positiveMin!==1/0?[positiveMin,max]:void 0}function getDomains(arrays,scaleType=_models__WEBPACK_IMPORTED_MODULE_10__.b.Linear){return arrays.map(arr=>getDomain(arr,scaleType))}function clampBound(val,withPositiveMin=!1){const absVal=Math.abs(val);return withPositiveMin&&absVal<=0?Number.MIN_VALUE:absVal>Number.MAX_VALUE/2?Math.sign(val)*Number.MAX_VALUE/2:val}function extendDomain(domain,extendFactor,scaleType=_models__WEBPACK_IMPORTED_MODULE_10__.b.Linear){if(extendFactor<=0)return domain;const[min,max]=domain,isLog=scaleType===_models__WEBPACK_IMPORTED_MODULE_10__.b.Log;if(min<=0&&isLog)throw new Error("Expected domain compatible with log scale");if(min===max)return function extendEmptyDomain(value,extendFactor,scaleType){if(scaleType===_models__WEBPACK_IMPORTED_MODULE_10__.b.Log)return[value*10**-extendFactor,value*10**extendFactor];if(0===value)return[-1,1];const extension=Math.abs(value)*extendFactor;return[value-extension,value+extension]}(min,extendFactor,scaleType);const scale=createAxisScale({type:scaleType,domain:domain,range:[0,1]});return[clampBound(scale.invert(-extendFactor),isLog),clampBound(scale.invert(1+extendFactor),isLog)]}function getValueToIndexScale(values,switchAtMidpoints){const indices=Object(d3_array__WEBPACK_IMPORTED_MODULE_4__.a)(values.length),thresholds=switchAtMidpoints?values.map((_,i)=>values[i-1]+(values[i]-values[i-1])/2):values;return Object(_visx_scale__WEBPACK_IMPORTED_MODULE_3__.a)({domain:thresholds.slice(1),range:indices})}function getCanvasScale(config,canvasSize){const{scaleType:scaleType,domain:domain}=config;return createAxisScale({domain:domain,range:[-canvasSize/2,canvasSize/2],type:scaleType||_models__WEBPACK_IMPORTED_MODULE_10__.b.Linear})}function getIntegerTicks(domain,count){const[min,max]=domain,intMin=Math.ceil(min),intMax=Math.floor(max),domainLength=intMax-intMin+1,optimalCount=Math.min(domainLength,count);if(0===optimalCount)return[];const step=Math.max(Object(d3_array__WEBPACK_IMPORTED_MODULE_5__.c)(intMin,intMax,optimalCount),1),start=Math.ceil(min/step),numTicks=Math.floor(max/step)-start+1;return Array.from({length:numTicks},(_,i)=>(start+i)*step)}function getTickFormatter(domain,availableSize,scaleType){if(scaleType!==_models__WEBPACK_IMPORTED_MODULE_10__.b.Log)return TICK_FORMAT;const[min,max]=domain[0]>0?domain:[-domain[1],-[domain[0]]];return max/min<10**adaptedLogTicksThreshold(availableSize)?TICK_FORMAT:val=>{const loggedVal=Math.log10(Math.abs(val.valueOf()));return loggedVal===Math.floor(loggedVal)?TICK_FORMAT(val):""}}function getCombinedDomain(domains){const domainsToCombine=domains.filter(_guards__WEBPACK_IMPORTED_MODULE_11__.h);if(0!==domainsToCombine.length)return domainsToCombine.reduce((accDomain,nextDomain)=>[Math.min(accDomain[0],nextDomain[0]),Math.max(accDomain[1],nextDomain[1])])}function getBaseArray(value,rawDims){return value&&ndarray__WEBPACK_IMPORTED_MODULE_7___default()(value.flat(1/0),rawDims)}function applyMapping(baseArray,mapping){if(!baseArray)return;const isXBeforeY=mapping.includes("y")&&mapping.indexOf("x")<mapping.indexOf("y"),slicingState=mapping.map(val=>Object(lodash_es__WEBPACK_IMPORTED_MODULE_9__.a)(val)?val:null),slicedView=baseArray.pick(...slicingState),mappedView=isXBeforeY?slicedView.transpose(1,0):slicedView,mappedArray=ndarray__WEBPACK_IMPORTED_MODULE_7___default()([],mappedView.shape);return Object(ndarray_ops__WEBPACK_IMPORTED_MODULE_8__.assign)(mappedArray,mappedView),mappedArray}},1791:function(module,exports){},18:function(module,__webpack_exports__,__webpack_require__){"use strict";let ScaleType,DomainError;__webpack_require__.d(__webpack_exports__,"b",(function(){return ScaleType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DomainError})),function(ScaleType){ScaleType.Linear="linear",ScaleType.Log="log",ScaleType.SymLog="symlog"}(ScaleType||(ScaleType={})),function(DomainError){DomainError.MinGreater="min-greater",DomainError.InvalidMinWithLog="invalid-min-with-log",DomainError.InvalidMaxWithLog="invalid-max-with-log",DomainError.CustomMaxFallback="custom-max-fallback"}(DomainError||(DomainError={}))},1817:function(module,exports){},1888:function(module,exports){},1935:function(module,exports){},1979:function(module,exports){},2008:function(module,exports){},2085:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(1112)},21:function(module,__webpack_exports__,__webpack_require__){"use strict";let EntityKind,DTypeClass,Endianness;__webpack_require__.d(__webpack_exports__,"c",(function(){return EntityKind})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DTypeClass})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Endianness})),function(EntityKind){EntityKind.Group="group",EntityKind.Dataset="dataset",EntityKind.Datatype="datatype",EntityKind.Unresolved="unresolved"}(EntityKind||(EntityKind={})),function(DTypeClass){DTypeClass.Bool="Boolean",DTypeClass.Integer="Integer",DTypeClass.Unsigned="Integer (unsigned)",DTypeClass.Float="Float",DTypeClass.Complex="Complex",DTypeClass.String="String",DTypeClass.Compound="Compound",DTypeClass.Array="Array",DTypeClass.VLen="Array (variable length)",DTypeClass.Enum="Enumeration",DTypeClass.Unknown="Unknown"}(DTypeClass||(DTypeClass={})),function(Endianness){Endianness.LE="little-endian",Endianness.BE="big-endian"}(Endianness||(Endianness={}))},231:function(module,__webpack_exports__,__webpack_require__){"use strict";var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);function FillHeight(MyStory){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{display:"grid",height:"100vh"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MyStory,{})})}__webpack_exports__.a=FillHeight;try{FillHeight.displayName="FillHeight",FillHeight.__docgenInfo={description:"",displayName:"FillHeight",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/decorators/FillHeight.tsx#FillHeight"]={docgenInfo:FillHeight.__docgenInfo,name:"FillHeight",path:"src/stories/decorators/FillHeight.tsx#FillHeight"})}catch(__react_docgen_typescript_loader_error){}},234:function(module,exports,__webpack_require__){module.exports={axisSystem:"AxisSystem_axisSystem__19hPO",axis:"AxisSystem_axis__3WzmG",grid:"AxisSystem_grid__ohRGd",tick:"AxisSystem_tick__2cDlf",label:"AxisSystem_label__3v_gK",title:"AxisSystem_title__fMEdr"}},275:function(module,exports,__webpack_require__){module.exports={colorBar:"ColorBar_colorBar__39u-6",gradient:"ColorBar_gradient__3uRdN",axis:"ColorBar_axis__22dR5",tick:"ColorBar_tick__Yej21",bound:"ColorBar_bound__2YDG5",minBound:"ColorBar_minBound__2U6wW ColorBar_bound__2YDG5",maxBound:"ColorBar_maxBound__svuSh ColorBar_bound__2YDG5"}},3101:function(module,exports,__webpack_require__){},3102:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(1112).configure)([__webpack_require__(3103),__webpack_require__(3105)],module,!1)}).call(this,__webpack_require__(140)(module))},3103:function(module,exports,__webpack_require__){var map={"./stories/Home.stories.mdx":3104};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=3103},3104:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(634);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__.b,{title:"Home",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h1",{id:"h5web-component-library"},"H5Web Component Library"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("a",_extends({parentName:"p"},{href:"https://github.com/silx-kit/h5web",target:"_blank",rel:"nofollow noopener noreferrer"}),"H5Web")," is a web-based viewer to explore HDF5 files. It is built with React and uses\n",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("a",_extends({parentName:"p"},{href:"https://github.com/react-spring/react-three-fiber",target:"_blank",rel:"nofollow noopener noreferrer"}),"react-three-fiber")," for visualizations."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"This library provides data visualization components and utilities from H5Web for use in other front-end web applications."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"The components are organised in two categories:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ul"},"🎨 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("strong",{parentName:"li"},"Visualizations"),": the top-level visualization components — i.e. the components you will most likely need."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ul"},"🧱 ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("strong",{parentName:"li"},"Building Blocks"),": the low-level components used by the visualization components — for advanced uses only.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h2",{id:"getting-started"},"Getting started"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Make you sure you have ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"react")," and ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"react-dom")," v16 or greater installed.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Install the library:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-bash"}),"npm install @h5web/lib\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Import and use a visualization component:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-tsx"}),"import { ScalarVis } from '@h5web/lib';\n\n// ...\n\n<ScalarVis value={1024} />;\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Other visualization components expect to receive an ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"ndarray")," and a domain as props."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("ol",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Install ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"ndarray")," and its corresponding types package (if you use TypeScript):"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-bash"}),"npm install ndarray\nnpm install --save-dev @types/ndarray\n"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Pass an ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"ndarray")," and domain to the visualization:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-tsx"}),"import ndarray from 'ndarray';\nimport { HeatmapVis, getDomain } from '@h5web/lib';\n\n// Source 2D array\nconst values = [\n  [0, 1, 2],\n  [3, 4, 5],\n];\n\n// Flatten array\nconst flatValues: number[] = values.flat(Infinity);\n\n// Convert to ndarray and get domain\nconst dataArray = ndarray<number>(flatValues, [2, 3]);\nconst domain = getDomain(dataArray);\n\n// ...\n\n<HeatmapVis dataArray={dataArray} domain={domain} />;\n"))))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ol"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",{parentName:"li"},"Configure the visualization:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-tsx"}),"import { HeatmapVis, getDomain, ScaleType } from '@h5web/lib';\n\n// ...\n\n<HeatmapVis\n  dataArray={dataArray}\n  domain={domain}\n  colorMap=\"Inferno\"\n  scaleType={ScaleType.Log}\n  ...\n/>;\n")))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h2",{id:"mock-data"},"Mock data"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"The library exposes a utility function to retrieve a mock entity's metadata and a mock dataset's value as ndarray for testing purposes.\nYou can browse through the available mock data at ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("a",_extends({parentName:"p"},{href:"https://h5web.panosc.eu/mock",target:"_blank",rel:"nofollow noopener noreferrer"}),"https://h5web.panosc.eu/mock"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"import { findMockEntity, getMockDataArray } from '@h5web/lib';\n\nconst entity = findMockEntity('/nD_datasets/twoD');\nconst dataArray = getMockDataArray('/nD_datasets/twoD');\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h2",{id:"utilities"},"Utilities"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"The library exposes a number of utility functions, which are documented below, as well as all the enums and types used by these utility functions.\nIf you use only the top-level visualization components, the only utilities you need are ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"getDomain")," and/or ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"useDomain"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"getdomain"},"getDomain"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Find the min and max values contained in a array (or ndarray) of numbers. If ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"scaleType")," is ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"ScaleType.Log")," and the domain crosses zero, clamp the min to the first positive value or return ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"undefined")," if the domain is not supported (i.e. ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"[-x, 0]"),")."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"getDomain(values: ndarray | number[], scaleType: ScaleType = ScaleType.Linear): Domain | undefined\n\nconst linearDomain = getDomain([10, 5, -1]); // [-1, 10]\nconst logDomain = getDomain([-1, 2, 10], ScaleType.Log); // [2, 10]\n\nconst myArray = ndarray([0, 1, 2, 3], [2, 2]);\nconst myDomain = getDomain(myArray); // [0, 3]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"getdomains"},"getDomains"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Find the domains of multiple arrays (or ndarrays) of numbers. Useful when dealing with auxiliary curves."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"getDomains(arrays: (ndarray | number[])[], scaleType: ScaleType = ScaleType.Linear): (Domain | undefined)[]\n\nconst linearDomains = getDomains([[-1, 5, 10], myArray]); // [[-1, 10], [0, 3]]\nconst logDomains = getDomains([[-1, 5, 10], myArray], ScaleType.Log); // [[2, 10], [0, 3]]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"getcombineddomain"},"getCombinedDomain"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Combine multiple domains into one. Useful to find the overall domain of a line visualization with auxiliary curves."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"getCombinedDomain(domains: (Domain | undefined)[]): Domain | undefined\n\nconst combinedDomain = getCombinedDomain([[-1, 10], [0, 30]]]); // [-1, 30]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"extenddomain"},"extendDomain"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Extend a domain by a factor in a given scale."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"extendDomain(domain: Domain, extendFactor: number, scaleType: ScaleType = ScaleType.Linear): Domain\n\nconst extendedDomain1 = extendDomain([0, 100], 0.5]); // [-50, 150]\nconst extendedDomain2 = extendDomain([10, 100], 1, ScaleType.Log); // approx. [1, 1000]\nconst extendedDomain3 = extendDomain([2, 2], 0.5); // [1, 3]\nconst extendedDomain4 = extendDomain([1, 1], 1, ScaleType.Log); // [0.1, 10]\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"computevissize"},"computeVisSize"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Compute the optimal size for a visualization based on the available size and an aspect ratio. If ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"aspecRatio")," is not provided, ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"availableSize")," is returned unchanged."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"computeVisSize(availableSize: Size, aspectRatio?: number): Size | undefined\n\nconst size = computeVisSize({ width: 20, height: 10 }, 1.5); // { width: 15, height: 10 }\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h4",{id:"getlineargradient"},"getLinearGradient"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("p",null,"Generate a CSS linear gradient for a given D3 interpolator, to be used as ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"background-image"),". If ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"minMaxOnly")," is ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"p"},"true"),", the gradient will include only two colours stops."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("code",_extends({parentName:"pre"},{className:"language-ts"}),"getLinearGradient(interpolator: D3Interpolator, direction: 'top' | 'bottom' | 'right' | 'left', minMaxOnly = false): string\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("h3",{id:"hooks"},"Hooks"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("strong",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"strong"},"useDomain(...args): Domain | undefined"))," - Memoised version of ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"li"},"getDomain"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("strong",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"strong"},"useDomains(...args): (Domain | undefined)[]"))," - Memoised version of ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"li"},"getDomains"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("strong",{parentName:"li"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"strong"},"useCombinedDomain(...args): Domain | undefined"))," - Memoised version of ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)("inlineCode",{parentName:"li"},"getCombinedDomain"),".")))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Home",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_2__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.b)(MDXContent,null))},__webpack_exports__.default=componentMeta},3105:function(module,exports,__webpack_require__){var map={"./stories/ColorBar.stories.tsx":3106,"./stories/HeatmapVis.stories.tsx":3154,"./stories/LineVis.stories.tsx":436,"./stories/LineVisDisplay.stories.tsx":3155,"./stories/LineVisScales.stories.tsx":3156,"./stories/ScalarVis.stories.tsx":3157,"./stories/VisCanvas.stories.tsx":3158};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=3105},3106:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"ColorMapStory",(function(){return ColorMapStory})),__webpack_require__.d(__webpack_exports__,"LogScale",(function(){return LogScale})),__webpack_require__.d(__webpack_exports__,"NegativeLogScale",(function(){return NegativeLogScale})),__webpack_require__.d(__webpack_exports__,"SymLogScale",(function(){return SymLogScale})),__webpack_require__.d(__webpack_exports__,"Horizontal",(function(){return Horizontal})),__webpack_require__.d(__webpack_exports__,"WithBounds",(function(){return WithBounds})),__webpack_require__.d(__webpack_exports__,"HorizontalWithBounds",(function(){return HorizontalWithBounds})),__webpack_require__.d(__webpack_exports__,"EmptyDomain",(function(){return EmptyDomain})),__webpack_require__.d(__webpack_exports__,"InvertColorMap",(function(){return InvertColorMap}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(231),_packages_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const Template=args=>{const{domainMin:min,domainMax:max,...colorBarArgs}=args;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.a,{domain:[min,max],...colorBarArgs})},Default=Template.bind({});Default.args={domainMin:.1,domainMax:1,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Linear,colorMap:"Viridis"};const ColorMapStory=Template.bind({});ColorMapStory.storyName="Color Map",ColorMapStory.args={...Default.args,colorMap:"Blues"};const LogScale=Template.bind({});LogScale.args={...Default.args,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log};const NegativeLogScale=Template.bind({});NegativeLogScale.storyName="Log Scale with negative domain",NegativeLogScale.args={...Default.args,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log,domainMin:-10,domainMax:-1};const SymLogScale=Template.bind({});SymLogScale.args={...Default.args,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.SymLog,domainMin:-6,domainMax:6};const Horizontal=Template.bind({});Horizontal.args={...Default.args,horizontal:!0};const WithBounds=Template.bind({});WithBounds.storyName="With bounds",WithBounds.args={...Default.args,domainMin:-235.111,domainMax:98765,withBounds:!0};const HorizontalWithBounds=Template.bind({});HorizontalWithBounds.storyName="Horizontal with bounds",HorizontalWithBounds.args={...Default.args,domainMin:-235.111,domainMax:98765,horizontal:!0,withBounds:!0};const EmptyDomain=Template.bind({});EmptyDomain.storyName="Empty domain",EmptyDomain.args={...Default.args,domainMin:0,domainMax:0,withBounds:!0};const InvertColorMap=Template.bind({});InvertColorMap.args={...Default.args,invertColorMap:!0},__webpack_exports__.default={title:"Building Blocks/ColorBar",component:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.a,parameters:{layout:"fullscreen"},decorators:[_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_1__.a],argTypes:{domainMin:{control:{type:"range",min:-10,max:10,step:.1}},domainMax:{control:{type:"range",min:-10,max:10,step:.1}},domain:{control:{disable:!0}},scaleType:{control:{type:"inline-radio",options:[_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Linear,_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log,_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.SymLog]}}}},Default.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...Default.parameters},ColorMapStory.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...ColorMapStory.parameters},LogScale.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...LogScale.parameters},NegativeLogScale.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...NegativeLogScale.parameters},SymLogScale.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...SymLogScale.parameters},Horizontal.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...Horizontal.parameters},WithBounds.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...WithBounds.parameters},HorizontalWithBounds.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...HorizontalWithBounds.parameters},EmptyDomain.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...EmptyDomain.parameters},InvertColorMap.parameters={storySource:{source:"(args) => {\n  const { domainMin: min, domainMax: max, ...colorBarArgs } = args;\n  return <ColorBar domain={[min, max]} {...colorBarArgs} />;\n}"},...InvertColorMap.parameters}},3154:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Domain",(function(){return Domain})),__webpack_require__.d(__webpack_exports__,"ColorMap",(function(){return ColorMap})),__webpack_require__.d(__webpack_exports__,"LogScale",(function(){return LogScale})),__webpack_require__.d(__webpack_exports__,"SymLogScale",(function(){return SymLogScale})),__webpack_require__.d(__webpack_exports__,"IgnoreAspectRatio",(function(){return IgnoreAspectRatio})),__webpack_require__.d(__webpack_exports__,"NoGrid",(function(){return NoGrid})),__webpack_require__.d(__webpack_exports__,"LiveData",(function(){return LiveData})),__webpack_require__.d(__webpack_exports__,"CustomEdges",(function(){return CustomEdges})),__webpack_require__.d(__webpack_exports__,"CustomEdgesWithExtension",(function(){return CustomEdgesWithExtension})),__webpack_require__.d(__webpack_exports__,"WithAxesLabels",(function(){return WithAxesLabels})),__webpack_require__.d(__webpack_exports__,"WithTitle",(function(){return WithTitle})),__webpack_require__.d(__webpack_exports__,"InvertColorMap",(function(){return InvertColorMap})),__webpack_require__.d(__webpack_exports__,"ScrollCaptured",(function(){return ScrollCaptured}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),ndarray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(143),ndarray__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(ndarray__WEBPACK_IMPORTED_MODULE_2__),react_use__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3170),_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(231),_packages_lib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8);const dataArray=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.k)("/nD_datasets/twoD"),domain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.j)(dataArray.data),logSafeDomain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.j)(dataArray.data,_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.Log),Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.c,{...args}),Default=Template.bind({});Default.args={dataArray:dataArray,domain:domain};const Domain=Template.bind({});Domain.args={dataArray:dataArray,domain:[-400,400]};const ColorMap=Template.bind({});ColorMap.args={dataArray:dataArray,domain:domain,colorMap:"Rainbow"};const LogScale=Template.bind({});LogScale.args={dataArray:dataArray,domain:logSafeDomain,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.Log};const SymLogScale=Template.bind({});SymLogScale.args={dataArray:dataArray,domain:domain,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.SymLog};const IgnoreAspectRatio=Template.bind({});IgnoreAspectRatio.args={dataArray:dataArray,domain:domain,keepAspectRatio:!1};const NoGrid=Template.bind({});NoGrid.args={dataArray:dataArray,domain:domain,showGrid:!1};const LiveData=args=>{const[shuffledArray,setShuffledArray]=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(args.dataArray);return Object(react_use__WEBPACK_IMPORTED_MODULE_3__.a)(()=>{const shuffledValues=[...shuffledArray.data].sort(()=>.5-Math.random());setShuffledArray(ndarray__WEBPACK_IMPORTED_MODULE_2___default()(shuffledValues,dataArray.shape))},5e3),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.c,{...args,dataArray:shuffledArray})};LiveData.args={dataArray:dataArray,domain:domain};const CustomEdges=Template.bind({});CustomEdges.args={dataArray:dataArray,domain:domain,abscissaParams:{value:Array.from({length:dataArray.shape[1]+1},(_,i)=>100+10*i)},ordinateParams:{value:Array.from({length:dataArray.shape[0]+1},(_,i)=>.5*i-5)}};const CustomEdgesWithExtension=Template.bind({});CustomEdgesWithExtension.args={dataArray:dataArray,domain:domain,abscissaParams:{value:Array.from({length:dataArray.shape[1]},(_,i)=>100+10*i)},ordinateParams:{value:Array.from({length:dataArray.shape[0]},(_,i)=>.5*i-5)}};const WithAxesLabels=Template.bind({});WithAxesLabels.args={dataArray:dataArray,domain:domain,abscissaParams:{label:"Latitude"},ordinateParams:{label:"Longitude"}};const WithTitle=Template.bind({});WithTitle.args={dataArray:dataArray,domain:domain,title:"Pretty colors"};const InvertColorMap=Template.bind({});InvertColorMap.args={dataArray:dataArray,domain:domain,invertColorMap:!0};const ScrollCaptured=Template.bind({});ScrollCaptured.args={dataArray:dataArray,domain:domain},ScrollCaptured.decorators=[VisCanvasStory=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{display:"flex",height:"100vh"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VisCanvasStory,{})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{height:500}})]})],__webpack_exports__.default={title:"Visualizations/HeatmapVis",component:_packages_lib__WEBPACK_IMPORTED_MODULE_5__.c,parameters:{layout:"fullscreen"},decorators:[_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_4__.a],argTypes:{dataArray:{},domain:{},colorMap:{defaultValue:"Viridis",control:{type:"select",options:Object.keys(_packages_lib__WEBPACK_IMPORTED_MODULE_5__.d)}},scaleType:{defaultValue:_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.Linear,control:{type:"inline-radio",options:[_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.Linear,_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.Log,_packages_lib__WEBPACK_IMPORTED_MODULE_5__.g.SymLog]}},keepAspectRatio:{defaultValue:!0},showGrid:{defaultValue:!0}}},Default.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...Default.parameters},Domain.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...Domain.parameters},ColorMap.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...ColorMap.parameters},LogScale.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...LogScale.parameters},SymLogScale.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...SymLogScale.parameters},IgnoreAspectRatio.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...IgnoreAspectRatio.parameters},NoGrid.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...NoGrid.parameters},LiveData.parameters={storySource:{source:"(args) => {\n  const [shuffledArray, setShuffledArray] = useState(args.dataArray);\n\n  useInterval(() => {\n    const shuffledValues = [...shuffledArray.data].sort(\n      () => 0.5 - Math.random()\n    );\n\n    setShuffledArray(ndarray(shuffledValues, dataArray.shape));\n  }, 5000);\n\n  return <HeatmapVis {...args} dataArray={shuffledArray} />;\n}"},...LiveData.parameters},CustomEdges.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...CustomEdges.parameters},CustomEdgesWithExtension.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...CustomEdgesWithExtension.parameters},WithAxesLabels.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...WithAxesLabels.parameters},WithTitle.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...WithTitle.parameters},InvertColorMap.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...InvertColorMap.parameters},ScrollCaptured.parameters={storySource:{source:"(args) => <HeatmapVis {...args} />"},...ScrollCaptured.parameters}},3155:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LineAndGlyphs",(function(){return LineAndGlyphs})),__webpack_require__.d(__webpack_exports__,"GlyphsOnly",(function(){return GlyphsOnly})),__webpack_require__.d(__webpack_exports__,"NoGrid",(function(){return NoGrid})),__webpack_require__.d(__webpack_exports__,"CustomAbscissas",(function(){return CustomAbscissas})),__webpack_require__.d(__webpack_exports__,"WithAxesLabels",(function(){return WithAxesLabels})),__webpack_require__.d(__webpack_exports__,"WithTitle",(function(){return WithTitle}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_LineVis_stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(436),_packages_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const dataArray=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.k)("/nD_datasets/oneD_linear"),domain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.j)(dataArray.data),Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.e,{...args}),LineAndGlyphs=Template.bind({});LineAndGlyphs.args={dataArray:dataArray,domain:domain,curveType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.b.LineAndGlyphs};const GlyphsOnly=Template.bind({});GlyphsOnly.args={dataArray:dataArray,domain:domain,curveType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.b.GlyphsOnly};const NoGrid=Template.bind({});NoGrid.args={dataArray:dataArray,domain:domain,showGrid:!1};const CustomAbscissas=Template.bind({});CustomAbscissas.args={dataArray:dataArray,domain:domain,abscissaParams:{value:Array.from({length:dataArray.size},(_,i)=>.5*i-10)}};const WithAxesLabels=Template.bind({});WithAxesLabels.args={dataArray:dataArray,domain:domain,abscissaParams:{label:"Time"},ordinateLabel:"Position"};const WithTitle=Template.bind({});WithTitle.args={dataArray:dataArray,domain:domain,title:"A simple curve"},__webpack_exports__.default={..._LineVis_stories__WEBPACK_IMPORTED_MODULE_1__.default,title:"Visualizations/LineVis/Display"},LineAndGlyphs.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...LineAndGlyphs.parameters},GlyphsOnly.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...GlyphsOnly.parameters},NoGrid.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...NoGrid.parameters},CustomAbscissas.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...CustomAbscissas.parameters},WithAxesLabels.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...WithAxesLabels.parameters},WithTitle.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...WithTitle.parameters}},3156:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LogForY",(function(){return LogForY})),__webpack_require__.d(__webpack_exports__,"SymLogForY",(function(){return SymLogForY})),__webpack_require__.d(__webpack_exports__,"LogForX",(function(){return LogForX})),__webpack_require__.d(__webpack_exports__,"SymLogForX",(function(){return SymLogForX})),__webpack_require__.d(__webpack_exports__,"LogLog",(function(){return LogLog}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_LineVis_stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(436),_packages_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const dataArray=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.k)("/nD_datasets/oneD_linear"),domain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.j)(dataArray.data),logSafeDomain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.j)(dataArray.data,_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log),dataArrayForXLog=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.k)("/nexus_entry/log_spectrum/X_log"),domainForXLog=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.j)(dataArrayForXLog.data),Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.e,{...args}),LogForY=Template.bind({});LogForY.storyName="Log for Y",LogForY.args={dataArray:dataArray,domain:logSafeDomain,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log};const SymLogForY=Template.bind({});SymLogForY.storyName="Sym Log for Y",SymLogForY.args={dataArray:dataArray,domain:domain,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.SymLog};const LogForX=Template.bind({});LogForX.storyName="Log for X",LogForX.args={dataArray:dataArrayForXLog,domain:domainForXLog,abscissaParams:{scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log}};const SymLogForX=Template.bind({});SymLogForX.storyName="Sym Log for X",SymLogForX.args={dataArray:dataArrayForXLog,domain:domainForXLog,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.SymLog};const LogLog=Template.bind({});LogLog.args={dataArray:dataArrayForXLog,domain:domainForXLog,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log,abscissaParams:{scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log}},__webpack_exports__.default={..._LineVis_stories__WEBPACK_IMPORTED_MODULE_1__.default,title:"Visualizations/LineVis/Scales"},LogForY.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...LogForY.parameters},SymLogForY.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...SymLogForY.parameters},LogForX.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...LogForX.parameters},SymLogForX.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...SymLogForX.parameters},LogLog.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...LogLog.parameters}},3157:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DisplayNumber",(function(){return DisplayNumber})),__webpack_require__.d(__webpack_exports__,"DisplayString",(function(){return DisplayString}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_packages_lib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8);const Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_1__.f,{...args}),DisplayNumber=Template.bind({});DisplayNumber.args={value:1024};const DisplayString=Template.bind({});DisplayString.args={value:"This is a scalar"},__webpack_exports__.default={title:"Visualizations/ScalarVis",component:_packages_lib__WEBPACK_IMPORTED_MODULE_1__.f},DisplayNumber.parameters={storySource:{source:"(args) => <ScalarVis {...args} />"},...DisplayNumber.parameters},DisplayString.parameters={storySource:{source:"(args) => <ScalarVis {...args} />"},...DisplayString.parameters}},3158:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"IndexDomains",(function(){return IndexDomains})),__webpack_require__.d(__webpack_exports__,"ArbitraryDomains",(function(){return ArbitraryDomains})),__webpack_require__.d(__webpack_exports__,"LogScales",(function(){return LogScales})),__webpack_require__.d(__webpack_exports__,"AspectRatio",(function(){return AspectRatio})),__webpack_require__.d(__webpack_exports__,"NoGrid",(function(){return NoGrid})),__webpack_require__.d(__webpack_exports__,"AxesLabels",(function(){return AxesLabels})),__webpack_require__.d(__webpack_exports__,"GraphTitle",(function(){return GraphTitle})),__webpack_require__.d(__webpack_exports__,"InheritedStyles",(function(){return InheritedStyles}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(231),_packages_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);const Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_2__.h,{...args}),IndexDomains=Template.bind({});IndexDomains.args={abscissaConfig:{domain:[0,3],showGrid:!0,isIndexAxis:!0},ordinateConfig:{domain:[50,100],showGrid:!0,isIndexAxis:!0}};const ArbitraryDomains=Template.bind({});ArbitraryDomains.args={abscissaConfig:{domain:[0,3],showGrid:!0},ordinateConfig:{domain:[50,100],showGrid:!0}};const LogScales=Template.bind({});LogScales.args={abscissaConfig:{domain:[1,10],showGrid:!0,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.Log},ordinateConfig:{domain:[-10,10],showGrid:!0,scaleType:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.g.SymLog}};const AspectRatio=Template.bind({});AspectRatio.args={abscissaConfig:{domain:[0,10],showGrid:!0,isIndexAxis:!0},ordinateConfig:{domain:[0,2],showGrid:!0,isIndexAxis:!0},aspectRatio:5};const NoGrid=Template.bind({});NoGrid.args={abscissaConfig:{domain:[-5,20],showGrid:!1,isIndexAxis:!0},ordinateConfig:{domain:[0,2],showGrid:!1}};const AxesLabels=Template.bind({});AxesLabels.args={abscissaConfig:{domain:[0,3],showGrid:!0,label:"Abscissas"},ordinateConfig:{domain:[50,100],showGrid:!0,label:"Ordinates"}};const GraphTitle=Template.bind({});GraphTitle.args={abscissaConfig:{domain:[0,3],showGrid:!0,isIndexAxis:!0},ordinateConfig:{domain:[50,100],showGrid:!0,isIndexAxis:!0},canvasTitle:"This is a graph"};const InheritedStyles=Template.bind({});InheritedStyles.args={abscissaConfig:{domain:[0,50],showGrid:!0,isIndexAxis:!0,label:"X values"},ordinateConfig:{domain:[0,3],showGrid:!0,isIndexAxis:!0,label:"Y values"},canvasTitle:"The title"},InheritedStyles.decorators=[VisCanvasStory=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{flex:"1 1 0%",display:"flex",fontFamily:"monospace",fontWeight:"bold",fontSize:"1.125rem"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VisCanvasStory,{})})],__webpack_exports__.default={title:"Building Blocks/VisCanvas",component:_packages_lib__WEBPACK_IMPORTED_MODULE_2__.h,parameters:{layout:"fullscreen"},decorators:[_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_1__.a]},IndexDomains.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...IndexDomains.parameters},ArbitraryDomains.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...ArbitraryDomains.parameters},LogScales.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...LogScales.parameters},AspectRatio.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...AspectRatio.parameters},NoGrid.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...NoGrid.parameters},AxesLabels.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...AxesLabels.parameters},GraphTitle.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...GraphTitle.parameters},InheritedStyles.parameters={storySource:{source:"(args) => <VisCanvas {...args} />"},...InheritedStyles.parameters}},3166:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(3229),esm=__webpack_require__(7);__webpack_require__(3100),__webpack_require__(3101);const parameters={actions:{argTypesRegex:"^on[A-Z].*"},options:{storySort:{order:["Home","Visualizations"]}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},436:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Domain",(function(){return Domain})),__webpack_require__.d(__webpack_exports__,"ErrorBars",(function(){return ErrorBars})),__webpack_require__.d(__webpack_exports__,"AuxiliaryArrays",(function(){return AuxiliaryArrays}));var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),ndarray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(143),ndarray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(ndarray__WEBPACK_IMPORTED_MODULE_1__),_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(231),_packages_lib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_h5web_vis_packs_core_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17);const dataArray=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_3__.k)("/nD_datasets/oneD_linear"),domain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_3__.j)(dataArray),secondaryValues=_packages_lib__WEBPACK_IMPORTED_MODULE_3__.l.secondary.flat(1/0),tertiaryValues=_packages_lib__WEBPACK_IMPORTED_MODULE_3__.l.tertiary.flat(1/0),secondaryArray=ndarray__WEBPACK_IMPORTED_MODULE_1___default()(secondaryValues,[20,41]),tertiaryArray=ndarray__WEBPACK_IMPORTED_MODULE_1___default()(tertiaryValues,[20,41]),combinedDomain=Object(_packages_lib__WEBPACK_IMPORTED_MODULE_3__.i)([domain,...Object(_h5web_vis_packs_core_utils__WEBPACK_IMPORTED_MODULE_4__.k)([secondaryArray,tertiaryArray])]),errorsArray=ndarray__WEBPACK_IMPORTED_MODULE_1___default()(Array.from({length:dataArray.size},(_,i)=>Math.abs(10-.5*i)),dataArray.shape),Template=args=>Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_packages_lib__WEBPACK_IMPORTED_MODULE_3__.e,{...args}),Default=Template.bind({});Default.args={dataArray:dataArray,domain:domain};const Domain=Template.bind({});Domain.args={dataArray:dataArray,domain:[-100,100]};const ErrorBars=Template.bind({});ErrorBars.args={dataArray:dataArray,domain:[-31,31],errorsArray:errorsArray,showErrors:!0};const AuxiliaryArrays=Template.bind({});AuxiliaryArrays.args={dataArray:dataArray,auxArrays:[secondaryArray,tertiaryArray],domain:combinedDomain};const LineVisStoriesConfig={title:"Visualizations/LineVis",component:_packages_lib__WEBPACK_IMPORTED_MODULE_3__.e,parameters:{layout:"fullscreen"},decorators:[_decorators_FillHeight__WEBPACK_IMPORTED_MODULE_2__.a],argTypes:{dataArray:{},domain:{},curveType:{defaultValue:_packages_lib__WEBPACK_IMPORTED_MODULE_3__.b.LineOnly,control:{type:"inline-radio",options:[_packages_lib__WEBPACK_IMPORTED_MODULE_3__.b.LineOnly,_packages_lib__WEBPACK_IMPORTED_MODULE_3__.b.GlyphsOnly,_packages_lib__WEBPACK_IMPORTED_MODULE_3__.b.LineAndGlyphs]}},scaleType:{defaultValue:_packages_lib__WEBPACK_IMPORTED_MODULE_3__.g.Linear,control:{type:"inline-radio",options:[_packages_lib__WEBPACK_IMPORTED_MODULE_3__.g.Linear,_packages_lib__WEBPACK_IMPORTED_MODULE_3__.g.Log,_packages_lib__WEBPACK_IMPORTED_MODULE_3__.g.SymLog]}},showGrid:{defaultValue:!0}}};__webpack_exports__.default=LineVisStoriesConfig,Default.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...Default.parameters},Domain.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...Domain.parameters},ErrorBars.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...ErrorBars.parameters},AuxiliaryArrays.parameters={storySource:{source:"(args) => <LineVis {...args} />"},...AuxiliaryArrays.parameters}},49:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return isDefined})),__webpack_require__.d(__webpack_exports__,"e",(function(){return assertDefined})),__webpack_require__.d(__webpack_exports__,"b",(function(){return assertArray})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isGroup})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isDataset})),__webpack_require__.d(__webpack_exports__,"c",(function(){return assertArrayShape})),__webpack_require__.d(__webpack_exports__,"f",(function(){return assertNumericType})),__webpack_require__.d(__webpack_exports__,"a",(function(){return assertAbsolutePath})),__webpack_require__.d(__webpack_exports__,"d",(function(){return assertDataLength}));var _providers_models__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),_vis_packs_core_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17);function isDefined(val){return void 0!==val}function assertDefined(val,message="Expected some value"){if(!isDefined(val))throw new TypeError(message)}function assertArray(val){if(!Array.isArray(val))throw new TypeError("Expected array")}function isGroup(entity){return entity.kind===_providers_models__WEBPACK_IMPORTED_MODULE_0__.c.Group}function isDataset(entity){return entity.kind===_providers_models__WEBPACK_IMPORTED_MODULE_0__.c.Dataset}function hasNumericType(dataset){return function isNumericType(type){return[_providers_models__WEBPACK_IMPORTED_MODULE_0__.a.Integer,_providers_models__WEBPACK_IMPORTED_MODULE_0__.a.Unsigned,_providers_models__WEBPACK_IMPORTED_MODULE_0__.a.Float].includes(type.class)}(dataset.type)}function assertArrayShape(dataset){if(!function hasArrayShape(dataset){return null!==dataset.shape&&dataset.shape.length>0}(dataset))throw new Error("Expected dataset to have array shape")}function assertNumericType(dataset){if(!hasNumericType(dataset))throw new Error("Expected dataset to have numeric type")}function assertAbsolutePath(path){if(!function isAbsolutePath(path){return path.startsWith("/")}(path))throw new Error("Expected path to start with '/'")}function assertDataLength(arr,dataArray,arrName){if(!arr)return;const{length:arrLength}=Object(_vis_packs_core_utils__WEBPACK_IMPORTED_MODULE_1__.o)(arr),{length:dataLength}=Object(_vis_packs_core_utils__WEBPACK_IMPORTED_MODULE_1__.o)(dataArray);if(arrLength!==dataLength)throw new Error("Expected ".concat(arrName," array (").concat(arrLength,") to have same length as data array (").concat(dataLength,")"))}},638:function(module,exports,__webpack_require__){module.exports={visArea:"VisCanvas_visArea__82c5m",vis:"VisCanvas_vis__yc-fW",canvasWrapper:"VisCanvas_canvasWrapper__2spCw"}},640:function(module,exports,__webpack_require__){module.exports={tooltip:"TooltipMesh_tooltip__Elx2C",guides:"TooltipMesh_guides__lbQGd",tooltipValue:"TooltipMesh_tooltipValue__V0pkp"}},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return scalar_ScalarVis})),__webpack_require__.d(__webpack_exports__,"e",(function(){return line_LineVis})),__webpack_require__.d(__webpack_exports__,"c",(function(){return heatmap_HeatmapVis})),__webpack_require__.d(__webpack_exports__,"h",(function(){return shared_VisCanvas})),__webpack_require__.d(__webpack_exports__,"a",(function(){return heatmap_ColorBar})),__webpack_require__.d(__webpack_exports__,"j",(function(){return utils.j})),__webpack_require__.d(__webpack_exports__,"i",(function(){return utils.i})),__webpack_require__.d(__webpack_exports__,"d",(function(){return INTERPOLATORS})),__webpack_require__.d(__webpack_exports__,"g",(function(){return models.b})),__webpack_require__.d(__webpack_exports__,"b",(function(){return CurveType})),__webpack_require__.d(__webpack_exports__,"l",(function(){return mockValues})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getMockDataArray}));var jsx_runtime=__webpack_require__(4),ScalarVis_module=__webpack_require__(1647),ScalarVis_module_default=__webpack_require__.n(ScalarVis_module);function ScalarVis(props){const{value:value}=props;return Object(jsx_runtime.jsx)("div",{className:ScalarVis_module_default.a.scalar,children:value.toString()})}var scalar_ScalarVis=ScalarVis;try{ScalarVis.displayName="ScalarVis",ScalarVis.__docgenInfo={description:"",displayName:"ScalarVis",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string | number | boolean | Complex"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/scalar/ScalarVis.tsx#ScalarVis"]={docgenInfo:ScalarVis.__docgenInfo,name:"ScalarVis",path:"src/h5web/vis-packs/core/scalar/ScalarVis.tsx#ScalarVis"})}catch(__react_docgen_typescript_loader_error){}var react=__webpack_require__(0),range=__webpack_require__(3168),LineVis_module=__webpack_require__(1648),LineVis_module_default=__webpack_require__.n(LineVis_module);let CurveType;!function(CurveType){CurveType.LineOnly="OnlyLine",CurveType.GlyphsOnly="OnlyGlyphs",CurveType.LineAndGlyphs="LineAndGlyphs"}(CurveType||(CurveType={}));const GLYPH_URLS_Cross="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAHlBMVEUAAAD///////////////////////////////////8kfJuVAAAACXRSTlMACbu0wfZESz4dBezaAAAB+0lEQVRo3qXZLU4lMBiF4WJuRpK5K0COHIlkExAcBs8m2AA/ortFcG/eFMFTwlH9avqkqicdpxyuxo9yfBprHt8uG5yLf3frxuF+3jQ5f+f70wqYM8IOYM67L4AZYQcwT4QAEfYAJ0KACFuAEyFAhD1AhAARDIgQIMIWIEKACAZECBDBgAgBIhgQIUAEAxZCgAgGRAgQQYCVcD3XXAmw5nUcGyIY0HkXXwk3BpSXywECAQMEA0AgAAQDQCAABANAIAAEA0AgAAQDQCAABANAIAAEA0QQgAQBTADABAFMAMAEAUwAwAQBTADABAFMAMAEAUwAwAQATADABABMIMAEA0wwwIQAJghgAgAmCGACACYIYAIAJghgAgAmCGACACYI4GKCJ4ubEZ4sBoBgAAgEgGAACQaYYIAJBphggAkGmGBABANMMMAEA0wwwAQ3I/QINyNUGTcjVBkCUGUMUJUxAAQDQCAABANAIAAEA0AgAAQDQCAABANAIAAEA0AgQAQCRBDABABMEMAEAEwQwAQATBDABABMEMAEAEwQwAQATPj998AzACDcjj/33wB4C+8PI0IAEwKMCAFAWAERApgQIEIAElZAhAAmBIgQwIQAEQKYECBCAOcYIEKALUKACAFMCBAhwA7hDIgQYItwBkQIsEf4BJTD/9ZbhDPgA552uER37zCWAAAAAElFTkSuQmCC",GLYPH_URLS_Cap="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAVSURBVChTYxiEgPE/EEDZQwgwMAAA2UoD/tFzIqIAAAAASUVORK5CYII=";var react_three_fiber_esm=__webpack_require__(29),three_module=__webpack_require__(16);function GlyphMaterial(props){const{color:color,size:size,glyphURL:glyphURL}=props,sprite=Object(react_three_fiber_esm.d)(three_module.TextureLoader,glyphURL||GLYPH_URLS_Cross);return sprite.magFilter=three_module.NearestFilter,Object(jsx_runtime.jsx)("pointsMaterial",{map:sprite,color:color,size:size,transparent:!0})}var line_GlyphMaterial=GlyphMaterial;try{GlyphMaterial.displayName="GlyphMaterial",GlyphMaterial.__docgenInfo={description:"",displayName:"GlyphMaterial",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},glyphURL:{defaultValue:null,description:"",name:"glyphURL",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/line/GlyphMaterial.tsx#GlyphMaterial"]={docgenInfo:GlyphMaterial.__docgenInfo,name:"GlyphMaterial",path:"src/h5web/vis-packs/core/line/GlyphMaterial.tsx#GlyphMaterial"})}catch(__react_docgen_typescript_loader_error){}function ErrorBars(props){const{barsSegments:barsSegments,capsPoints:capsPoints,color:color,visible:visible}=props,invalidate=Object(react_three_fiber_esm.e)(state=>state.invalidate),barsGeometry=Object(react.useRef)(null);Object(react.useLayoutEffect)(()=>{var _barsGeometry$current;null===(_barsGeometry$current=barsGeometry.current)||void 0===_barsGeometry$current||_barsGeometry$current.setFromPoints(barsSegments),invalidate()},[barsGeometry,barsSegments,invalidate]);const capsGeometry=Object(react.useRef)(null);return Object(react.useLayoutEffect)(()=>{var _capsGeometry$current;null===(_capsGeometry$current=capsGeometry.current)||void 0===_capsGeometry$current||_capsGeometry$current.setFromPoints(capsPoints),invalidate()},[capsGeometry,capsPoints,invalidate]),Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("lineSegments",{visible:visible,children:[Object(jsx_runtime.jsx)("lineBasicMaterial",{color:color,linewidth:2}),Object(jsx_runtime.jsx)("bufferGeometry",{ref:barsGeometry})]}),Object(jsx_runtime.jsxs)("points",{visible:visible,children:[Object(jsx_runtime.jsx)(line_GlyphMaterial,{glyphURL:GLYPH_URLS_Cap,color:color,size:9}),Object(jsx_runtime.jsx)("bufferGeometry",{ref:capsGeometry})]})]})}var line_ErrorBars=ErrorBars;try{ErrorBars.displayName="ErrorBars",ErrorBars.__docgenInfo={description:"",displayName:"ErrorBars",props:{capsPoints:{defaultValue:null,description:"",name:"capsPoints",required:!0,type:{name:"Vector3[]"}},barsSegments:{defaultValue:null,description:"",name:"barsSegments",required:!0,type:{name:"Vector3[]"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/line/ErrorBars.tsx#ErrorBars"]={docgenInfo:ErrorBars.__docgenInfo,name:"ErrorBars",path:"src/h5web/vis-packs/core/line/ErrorBars.tsx#ErrorBars"})}catch(__react_docgen_typescript_loader_error){}var defaultLocale=__webpack_require__(3171),createMemo=(__webpack_require__(3169),__webpack_require__(3185)),utils=__webpack_require__(17),AxisSystemContext=Object(react.createContext)({});const useDomain=Object(createMemo.a)(utils.j);Object(createMemo.a)(utils.k);function useCanvasScales(){const{abscissaConfig:abscissaConfig,ordinateConfig:ordinateConfig}=Object(react.useContext)(AxisSystemContext),{width:width,height:height}=Object(react_three_fiber_esm.e)(state=>state.size);return{abscissaScale:Object(utils.h)(abscissaConfig,width),ordinateScale:Object(utils.h)(ordinateConfig,height)}}Object(createMemo.a)(utils.i),Object(createMemo.a)(utils.g),Object(createMemo.a)(utils.c);const useValueToIndexScale=Object(createMemo.a)(utils.n);function DataCurve(props){const{abscissas:abscissas,ordinates:ordinates,errors:errors,showErrors:showErrors,color:color="--secondary-dark",curveType:curveType=CurveType.LineOnly}=props,[dataGeometry]=Object(react.useState)(()=>new three_module.BufferGeometry),points=function useCanvasPoints(abscissas,ordinates,errors){const{abscissaScale:abscissaScale,ordinateScale:ordinateScale}=useCanvasScales();return Object(react.useMemo)(()=>{const dataPoints=[],errorBarSegments=[],errorCapPoints=[];return ordinates.forEach((val,index)=>{const x=abscissaScale(abscissas[index]),y=ordinateScale(val),hasFiniteCoords=Number.isFinite(x)&&Number.isFinite(y),dataVector=hasFiniteCoords?new three_module.Vector3(x,y,0):new three_module.Vector3(0,0,1e3);dataPoints.push(dataVector);const error=errors&&errors[index];if(!error||!hasFiniteCoords)return;const yErrBottom=ordinateScale(val-error),yErrTop=ordinateScale(val+error);if(Number.isFinite(yErrBottom)){const errBottomVector=new three_module.Vector3(x,yErrBottom,0);errorBarSegments.push(errBottomVector,dataVector),errorCapPoints.push(errBottomVector)}if(Number.isFinite(yErrTop)){const errTopVector=new three_module.Vector3(x,yErrTop,0);errorBarSegments.push(dataVector,errTopVector),errorCapPoints.push(errTopVector)}}),{data:dataPoints,bars:errorBarSegments,caps:errorCapPoints}},[abscissaScale,abscissas,errors,ordinateScale,ordinates])}(abscissas,ordinates,errors),invalidate=Object(react_three_fiber_esm.e)(state=>state.invalidate);Object(react.useLayoutEffect)(()=>{dataGeometry.setFromPoints(points.data),invalidate()},[dataGeometry,invalidate,points.data]);const showLine=curveType!==CurveType.GlyphsOnly,showGlyphs=curveType!==CurveType.LineOnly,{domElement:domElement}=Object(react_three_fiber_esm.e)(state=>state.gl),curveColor=color.startsWith("--")?window.getComputedStyle(domElement).getPropertyValue(color).trim():color;return Object(jsx_runtime.jsxs)(react.Suspense,{fallback:null,children:[Object(jsx_runtime.jsx)("line_",{visible:showLine,geometry:dataGeometry,children:Object(jsx_runtime.jsx)("lineBasicMaterial",{color:curveColor,linewidth:2})}),Object(jsx_runtime.jsx)("points",{visible:showGlyphs,geometry:dataGeometry,children:Object(jsx_runtime.jsx)(line_GlyphMaterial,{color:curveColor,size:6})}),showErrors&&errors&&Object(jsx_runtime.jsx)(line_ErrorBars,{barsSegments:points.bars,capsPoints:points.caps,color:curveColor})]})}Object(react_three_fiber_esm.b)({Line_:three_module.Line});var line_DataCurve=DataCurve;try{DataCurve.displayName="DataCurve",DataCurve.__docgenInfo={description:"",displayName:"DataCurve",props:{abscissas:{defaultValue:null,description:"",name:"abscissas",required:!0,type:{name:"number[]"}},ordinates:{defaultValue:null,description:"",name:"ordinates",required:!0,type:{name:"number[]"}},errors:{defaultValue:null,description:"",name:"errors",required:!1,type:{name:"number[]"}},showErrors:{defaultValue:null,description:"",name:"showErrors",required:!1,type:{name:"boolean"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},curveType:{defaultValue:null,description:"",name:"curveType",required:!1,type:{name:"CurveType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/line/DataCurve.tsx#DataCurve"]={docgenInfo:DataCurve.__docgenInfo,name:"DataCurve",path:"src/h5web/vis-packs/core/line/DataCurve.tsx#DataCurve"})}catch(__react_docgen_typescript_loader_error){}var useMeasure=__webpack_require__(3226),VisCanvas_module=__webpack_require__(638),VisCanvas_module_default=__webpack_require__.n(VisCanvas_module),react_dom=__webpack_require__(133),react_dom_default=__webpack_require__.n(react_dom);const Html=Object(react.forwardRef)((props,ref)=>{const{className:className,style:style,children:children,...divProps}=props,{width:width,height:height}=Object(react_three_fiber_esm.e)(state=>state.size),gl=Object(react_three_fiber_esm.e)(state=>state.gl),{parentElement:parentElement}=gl.domElement,[el]=Object(react.useState)(()=>document.createElement("div"));return Object(react.useEffect)(()=>(el.style.cssText="position: absolute; top: 0; left: 0;",parentElement&&parentElement.append(el),()=>{parentElement&&el.remove(),react_dom_default.a.unmountComponentAtNode(el)}),[el,parentElement]),Object(react.useLayoutEffect)(()=>{react_dom_default.a.render(Object(jsx_runtime.jsx)("div",{ref:ref,className:className,style:{position:"absolute",top:0,left:0,width:width,height:height,pointerEvents:"none",...style},...divProps,children:children}),el)},[children,className,el,height,width,style,divProps,ref]),null});var shared_Html=Html;try{Html.displayName="Html",Html.__docgenInfo={description:"",displayName:"Html",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/shared/Html.tsx#Html"]={docgenInfo:Html.__docgenInfo,name:"Html",path:"src/h5web/vis-packs/core/shared/Html.tsx#Html"})}catch(__react_docgen_typescript_loader_error){}var AxisSystem_module=__webpack_require__(234),AxisSystem_module_default=__webpack_require__.n(AxisSystem_module),AxisBottom=__webpack_require__(3186),AxisLeft=__webpack_require__(3189),GridColumns=__webpack_require__(3188),GridRows=__webpack_require__(3190),models=__webpack_require__(18);const AXIS_PROPS={hideAxisLine:!0,tickClassName:AxisSystem_module_default.a.tick,labelClassName:AxisSystem_module_default.a.label,labelProps:{},tickComponent:({formattedValue:formattedValue,...tickProps})=>Object(jsx_runtime.jsx)("text",{...tickProps,children:formattedValue})},COMPONENTS={abscissa:[AxisBottom.a,GridColumns.a],ordinate:[AxisLeft.a,GridRows.a]};function Axis_Axis(props){const{type:type,config:config,domain:domain,canvasSize:canvasSize,flipAxis:flipAxis}=props,{width:width,height:height}=canvasSize,axisLength="abscissa"===type?width:height,{scaleType:scaleType=models.b.Linear,isIndexAxis:isIndexAxis,showGrid:showGrid,label:label}=config,scale=Object(utils.e)({domain:domain,range:flipAxis?[axisLength,0]:[0,axisLength],type:scaleType}),[AxisComponent,GridComponent]=COMPONENTS[type],numTicks=Object(utils.b)(axisLength),ticksProp=isIndexAxis?{tickValues:Object(utils.l)(domain,numTicks)}:{numTicks:numTicks};return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("svg",{className:AxisSystem_module_default.a.axis,"data-type":type,children:Object(jsx_runtime.jsx)(AxisComponent,{scale:scale,tickFormat:Object(utils.m)(domain,axisLength,scaleType),label:label,labelOffset:"abscissa"===type?22:42,...ticksProp,...AXIS_PROPS})}),showGrid&&Object(jsx_runtime.jsx)("svg",{className:AxisSystem_module_default.a.grid,children:Object(jsx_runtime.jsx)(GridComponent,{scale:scale,width:width,height:height,...ticksProp})})]})}var shared_Axis=Axis_Axis;try{Axis_Axis.displayName="Axis",Axis_Axis.__docgenInfo={description:"",displayName:"Axis",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"abscissa"'},{value:'"ordinate"'}]}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"AxisConfig"}},domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"Domain"}},canvasSize:{defaultValue:null,description:"",name:"canvasSize",required:!0,type:{name:"Size"}},flipAxis:{defaultValue:null,description:"",name:"flipAxis",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/shared/Axis.tsx#Axis"]={docgenInfo:Axis_Axis.__docgenInfo,name:"Axis",path:"src/h5web/vis-packs/core/shared/Axis.tsx#Axis"})}catch(__react_docgen_typescript_loader_error){}function AxisSystem(props){const{axisOffsets:axisOffsets,title:title}=props,{abscissaConfig:abscissaConfig,ordinateConfig:ordinateConfig}=Object(react.useContext)(AxisSystemContext),{position:position,zoom:zoom}=Object(react_three_fiber_esm.e)(state=>state.camera),size=Object(react_three_fiber_esm.e)(state=>state.size),{width:width,height:height}=size,{abscissaScale:abscissaScale,ordinateScale:ordinateScale}=useCanvasScales(),xVisibleDomain=[abscissaScale.invert(-width/(2*zoom)+position.x),abscissaScale.invert(width/(2*zoom)+position.x)],yVisibleDomain=[ordinateScale.invert(-height/(2*zoom)+position.y),ordinateScale.invert(height/(2*zoom)+position.y)];return function useFrameRendering(){const[,setNum]=Object(react.useState)(0);Object(react_three_fiber_esm.c)(()=>{setNum(Math.random())})}(),Object(jsx_runtime.jsxs)(shared_Html,{className:AxisSystem_module_default.a.axisSystem,style:{top:-axisOffsets.top,left:-axisOffsets.left,width:width+axisOffsets.left+axisOffsets.right,height:height+axisOffsets.bottom+axisOffsets.top,gridTemplateColumns:"".concat(axisOffsets.left,"px 1fr ").concat(axisOffsets.right,"px"),gridTemplateRows:"".concat(axisOffsets.top,"px 1fr ").concat(axisOffsets.bottom,"px")},children:[title&&Object(jsx_runtime.jsx)("p",{id:"vis-title",className:AxisSystem_module_default.a.title,children:title}),Object(jsx_runtime.jsx)(shared_Axis,{type:"abscissa",config:abscissaConfig,domain:xVisibleDomain,canvasSize:size}),Object(jsx_runtime.jsx)(shared_Axis,{type:"ordinate",config:ordinateConfig,domain:yVisibleDomain,canvasSize:size,flipAxis:!0})]})}var shared_AxisSystem=AxisSystem;try{AxisSystem.displayName="AxisSystem",AxisSystem.__docgenInfo={description:"",displayName:"AxisSystem",props:{axisOffsets:{defaultValue:null,description:"",name:"axisOffsets",required:!0,type:{name:"AxisOffsets"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/shared/AxisSystem.tsx#AxisSystem"]={docgenInfo:AxisSystem.__docgenInfo,name:"AxisSystem",path:"src/h5web/vis-packs/core/shared/AxisSystem.tsx#AxisSystem"})}catch(__react_docgen_typescript_loader_error){}const AXIS_OFFSETS_vertical=72,AXIS_OFFSETS_horizontal=36,AXIS_OFFSETS_fallback=16;function VisCanvas(props){const{abscissaConfig:abscissaConfig,ordinateConfig:ordinateConfig,aspectRatio:aspectRatio,canvasTitle:canvasTitle,children:children}=props,[visAreaRef,visAreaSize]=Object(useMeasure.a)(),axisOffsets={left:AXIS_OFFSETS_vertical,bottom:abscissaConfig.label?AXIS_OFFSETS_horizontal+AXIS_OFFSETS_fallback:AXIS_OFFSETS_horizontal,right:AXIS_OFFSETS_fallback,top:canvasTitle?AXIS_OFFSETS_horizontal:AXIS_OFFSETS_fallback},availableSize={width:visAreaSize.width-axisOffsets.left-axisOffsets.right,height:visAreaSize.height-axisOffsets.bottom-axisOffsets.top},visSize=Object(utils.d)(availableSize,aspectRatio);return Object(jsx_runtime.jsx)("div",{ref:visAreaRef,className:VisCanvas_module_default.a.visArea,children:visSize&&Object(jsx_runtime.jsx)("div",{className:VisCanvas_module_default.a.vis,style:{...visSize,paddingBottom:axisOffsets.bottom,paddingLeft:axisOffsets.left,paddingTop:axisOffsets.top,paddingRight:axisOffsets.right,boxSizing:"content-box"},children:Object(jsx_runtime.jsxs)(react_three_fiber_esm.a,{className:VisCanvas_module_default.a.canvasWrapper,orthographic:!0,linear:!0,frameloop:"demand",dpr:Math.min(window.devicePixelRatio,3),gl:{preserveDrawingBuffer:!0},children:[Object(jsx_runtime.jsx)("ambientLight",{}),Object(jsx_runtime.jsxs)(AxisSystemContext.Provider,{value:{abscissaConfig:abscissaConfig,ordinateConfig:ordinateConfig},children:[Object(jsx_runtime.jsx)(shared_AxisSystem,{title:canvasTitle,axisOffsets:axisOffsets}),children]})]})})})}var shared_VisCanvas=VisCanvas;try{VisCanvas.displayName="VisCanvas",VisCanvas.__docgenInfo={description:"",displayName:"VisCanvas",props:{abscissaConfig:{defaultValue:null,description:"",name:"abscissaConfig",required:!0,type:{name:"AxisConfig"}},ordinateConfig:{defaultValue:null,description:"",name:"ordinateConfig",required:!0,type:{name:"AxisConfig"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},canvasTitle:{defaultValue:null,description:"",name:"canvasTitle",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/shared/VisCanvas.tsx#VisCanvas"]={docgenInfo:VisCanvas.__docgenInfo,name:"VisCanvas",path:"src/h5web/vis-packs/core/shared/VisCanvas.tsx#VisCanvas"})}catch(__react_docgen_typescript_loader_error){}var clamp=__webpack_require__(3230);var shared_PanZoomMesh=function PanZoomMesh(){const camera=Object(react_three_fiber_esm.e)(state=>state.camera),{width:width,height:height}=Object(react_three_fiber_esm.e)(state=>state.size),invalidate=Object(react_three_fiber_esm.e)(state=>state.invalidate),startOffsetPosition=Object(react.useRef)(),moveCameraTo=Object(react.useCallback)((x,y)=>{const{position:position,zoom:zoom}=camera,factor=(1-1/zoom)/2,xBound=width*factor,yBound=height*factor;position.set(Object(clamp.a)(x,-xBound,xBound),Object(clamp.a)(y,-yBound,yBound),position.z),invalidate()},[camera,height,invalidate,width]),onPointerDown=Object(react.useCallback)(evt=>{const{target:target,pointerId:pointerId,unprojectedPoint:unprojectedPoint}=evt;target.setPointerCapture(pointerId);const projectedPoint=camera.worldToLocal(unprojectedPoint.clone());startOffsetPosition.current=camera.position.clone().add(projectedPoint)},[camera]),onPointerUp=Object(react.useCallback)(evt=>{const{target:target,pointerId:pointerId}=evt;target.releasePointerCapture(pointerId),startOffsetPosition.current=void 0},[]),onPointerMove=Object(react.useCallback)(evt=>{if(!startOffsetPosition.current)return;evt.stopPropagation();const projectedPoint=camera.worldToLocal(evt.unprojectedPoint.clone()),{x:pointerX,y:pointerY}=projectedPoint,{x:startX,y:startY}=startOffsetPosition.current;moveCameraTo(startX-pointerX,startY-pointerY)},[camera,moveCameraTo]),onWheel=Object(react.useCallback)(evt=>{const factor=evt.deltaY>0?.95:1/.95;camera.zoom=Math.max(1,camera.zoom*factor),camera.updateProjectionMatrix();const projectedPoint=camera.worldToLocal(evt.unprojectedPoint.clone()),{x:pointerX,y:pointerY}=projectedPoint,{x:camX,y:camY}=camera.position;moveCameraTo(camX+pointerX*(1-1/factor),camY+pointerY*(1-1/factor))},[camera,moveCameraTo]);Object(react.useEffect)(()=>{moveCameraTo(camera.position.x,camera.position.y)},[camera,moveCameraTo]);const wheelCaptureRef=function useWheelCapture(){const ref=Object(react.useRef)(null);return Object(react.useEffect)(()=>{const elem=ref.current;function onWheel(evt){evt.preventDefault()}return null==elem||elem.addEventListener("wheel",onWheel,{passive:!1}),()=>null==elem?void 0:elem.removeEventListener("wheel",onWheel)}),ref}();return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("mesh",{onPointerMove:onPointerMove,onPointerUp:onPointerUp,onPointerDown:onPointerDown,onWheel:onWheel,children:[Object(jsx_runtime.jsx)("meshBasicMaterial",{opacity:0,transparent:!0}),Object(jsx_runtime.jsx)("planeGeometry",{args:[width,height]})]}),Object(jsx_runtime.jsx)(shared_Html,{ref:wheelCaptureRef})]})},useTooltip=__webpack_require__(3191),TooltipWithBounds=__webpack_require__(3227),Line=__webpack_require__(3187),TooltipMesh_module=__webpack_require__(640),TooltipMesh_module_default=__webpack_require__.n(TooltipMesh_module);function TooltipMesh(props){const{formatIndex:formatIndex,formatValue:formatValue,guides:guides}=props,camera=Object(react_three_fiber_esm.e)(state=>state.camera),{width:width,height:height}=Object(react_three_fiber_esm.e)(state=>state.size),{abscissaScale:abscissaScale,ordinateScale:ordinateScale}=useCanvasScales(),{tooltipOpen:tooltipOpen,tooltipTop:tooltipTop,tooltipLeft:tooltipLeft,tooltipData:tooltipData,showTooltip:showTooltip,hideTooltip:hideTooltip}=Object(useTooltip.a)(),onPointerMove=Object(react.useCallback)(evt=>{const{zoom:zoom}=camera,projectedPoint=camera.worldToLocal(evt.unprojectedPoint.clone()),abscissaCoord=abscissaScale.invert(evt.unprojectedPoint.x),ordinateCoord=ordinateScale.invert(evt.unprojectedPoint.y);showTooltip({tooltipLeft:projectedPoint.x*zoom+width/2,tooltipTop:-projectedPoint.y*zoom+height/2,tooltipData:[abscissaCoord,ordinateCoord]})},[camera,abscissaScale,ordinateScale,showTooltip,width,height]),onPointerOut=Object(react.useCallback)(hideTooltip,[hideTooltip]),onPointerDown=Object(react.useCallback)(hideTooltip,[hideTooltip]),onPointerUp=Object(react.useCallback)(evt=>{const{offsetX:x,offsetY:y}=evt;x>=0&&x<=width&&y>=0&&y<=height&&onPointerMove(evt)},[height,onPointerMove,width]),value=tooltipData&&formatValue(tooltipData);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("mesh",{onPointerMove:onPointerMove,onPointerOut:onPointerOut,onPointerDown:onPointerDown,onPointerUp:onPointerUp,children:[Object(jsx_runtime.jsx)("meshBasicMaterial",{opacity:0,transparent:!0}),Object(jsx_runtime.jsx)("planeGeometry",{args:[width,height]})]}),Object(jsx_runtime.jsx)(shared_Html,{children:tooltipOpen&&tooltipData&&value&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)(TooltipWithBounds.a,{className:TooltipMesh_module_default.a.tooltip,top:tooltipTop,left:tooltipLeft,children:[formatIndex(tooltipData),Object(jsx_runtime.jsx)("span",{className:TooltipMesh_module_default.a.tooltipValue,children:value})]},Math.random()),guides&&Object(jsx_runtime.jsxs)("svg",{className:TooltipMesh_module_default.a.guides,width:width,height:height,children:["horizontal"!==guides&&Object(jsx_runtime.jsx)(Line.a,{from:{x:tooltipLeft,y:0},to:{x:tooltipLeft,y:height}}),"vertical"!==guides&&Object(jsx_runtime.jsx)(Line.a,{from:{x:0,y:tooltipTop},to:{x:width,y:tooltipTop}})]})]})})]})}var shared_TooltipMesh=TooltipMesh;try{TooltipMesh.displayName="TooltipMesh",TooltipMesh.__docgenInfo={description:"",displayName:"TooltipMesh",props:{formatIndex:{defaultValue:null,description:"",name:"formatIndex",required:!0,type:{name:"TooltipIndexFormatter"}},formatValue:{defaultValue:null,description:"",name:"formatValue",required:!0,type:{name:"TooltipValueFormatter"}},guides:{defaultValue:null,description:"",name:"guides",required:!1,type:{name:'"horizontal" | "vertical" | "both"'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/shared/TooltipMesh.tsx#TooltipMesh"]={docgenInfo:TooltipMesh.__docgenInfo,name:"TooltipMesh",path:"src/h5web/vis-packs/core/shared/TooltipMesh.tsx#TooltipMesh"})}catch(__react_docgen_typescript_loader_error){}var guards=__webpack_require__(49);function LineVis(props){const{dataArray:dataArray,domain:domain,curveType:curveType=CurveType.LineOnly,showGrid:showGrid=!0,scaleType:scaleType=models.b.Linear,abscissaParams:abscissaParams={},ordinateLabel:ordinateLabel,title:title,errorsArray:errorsArray,showErrors:showErrors,auxArrays:auxArrays=[]}=props,{label:abscissaLabel,value:abscissaValue,scaleType:abscissaScaleType}=abscissaParams;Object(guards.d)(abscissaValue,dataArray,"abscissa"),Object(guards.d)(errorsArray,dataArray,"error"),auxArrays.forEach(arr=>Object(guards.d)(arr,dataArray,"auxiliary"));const abscissas=Object(react.useMemo)(()=>abscissaValue||Object(range.a)(dataArray.size),[abscissaValue,dataArray.size]),abscissaDomain=Object(react.useMemo)(()=>{const rawDomain=Object(utils.j)(abscissas,abscissaScaleType);return rawDomain&&Object(utils.f)(rawDomain,.01,abscissaScaleType)},[abscissas,abscissaScaleType]);Object(guards.e)(abscissaDomain,"Abscissas have undefined domain");const dataDomain=Object(react.useMemo)(()=>domain?Object(utils.f)(domain,.05,scaleType):utils.a,[scaleType,domain]),tooltipFormatters=function useTooltipFormatters(abscissas,abscissaLabel,dataArray,errorsArray){const abscissaToIndex=useValueToIndexScale(abscissas,!0);return{formatIndex:([x])=>"".concat(abscissaLabel||"x","=").concat(Object(defaultLocale.a)("0")(abscissas[abscissaToIndex(x)])),formatValue:([x])=>{const index=abscissaToIndex(x),value=dataArray.get(index);if(void 0===value)return;const error=errorsArray&&errorsArray.get(index);return error?"".concat(Object(defaultLocale.a)(".3f")(value)," ±").concat(Object(defaultLocale.a)(".3f")(error)):"".concat(Object(defaultLocale.a)(".3f")(value))}}}(abscissas,abscissaLabel,dataArray,errorsArray);return Object(jsx_runtime.jsx)("figure",{className:LineVis_module_default.a.root,"aria-labelledby":"vis-title",children:Object(jsx_runtime.jsxs)(shared_VisCanvas,{canvasTitle:title,abscissaConfig:{domain:abscissaDomain,showGrid:showGrid,scaleType:abscissaScaleType,isIndexAxis:!abscissaValue,label:abscissaLabel},ordinateConfig:{domain:dataDomain,showGrid:showGrid,scaleType:scaleType,label:ordinateLabel},children:[Object(jsx_runtime.jsx)(shared_TooltipMesh,{...tooltipFormatters,guides:"vertical"}),Object(jsx_runtime.jsx)(shared_PanZoomMesh,{}),Object(jsx_runtime.jsx)(line_DataCurve,{curveType:curveType,abscissas:abscissas,ordinates:dataArray.data,errors:errorsArray&&errorsArray.data,showErrors:showErrors}),auxArrays.map((array,i)=>Object(jsx_runtime.jsx)(line_DataCurve,{color:"--secondary",curveType:curveType,abscissas:abscissas,ordinates:array.data},i))]})})}var line_LineVis=LineVis;try{LineVis.displayName="LineVis",LineVis.__docgenInfo={description:"",displayName:"LineVis",props:{dataArray:{defaultValue:null,description:"",name:"dataArray",required:!0,type:{name:"ndarray<number>"}},domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"Domain | undefined"}},scaleType:{defaultValue:null,description:"",name:"scaleType",required:!1,type:{name:"ScaleType"}},curveType:{defaultValue:null,description:"",name:"curveType",required:!1,type:{name:"CurveType"}},showGrid:{defaultValue:null,description:"",name:"showGrid",required:!1,type:{name:"boolean"}},abscissaParams:{defaultValue:null,description:"",name:"abscissaParams",required:!1,type:{name:"AxisParams"}},ordinateLabel:{defaultValue:null,description:"",name:"ordinateLabel",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},errorsArray:{defaultValue:null,description:"",name:"errorsArray",required:!1,type:{name:"ndarray<number>"}},showErrors:{defaultValue:null,description:"",name:"showErrors",required:!1,type:{name:"boolean"}},auxArrays:{defaultValue:null,description:"",name:"auxArrays",required:!1,type:{name:"ndarray<number>[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/line/LineVis.tsx#LineVis"]={docgenInfo:LineVis.__docgenInfo,name:"LineVis",path:"src/h5web/vis-packs/core/line/LineVis.tsx#LineVis"})}catch(__react_docgen_typescript_loader_error){}var HeatmapVis_module=__webpack_require__(1654),HeatmapVis_module_default=__webpack_require__.n(HeatmapVis_module),AxisRight=__webpack_require__(3223),ColorBar_module=__webpack_require__(275),ColorBar_module_default=__webpack_require__.n(ColorBar_module),lodash_es_range=__webpack_require__(3224),src_color=__webpack_require__(176),Blues=__webpack_require__(3192),Greens=__webpack_require__(3193),Greys=__webpack_require__(3194),Oranges=__webpack_require__(3195),Purples=__webpack_require__(3196),Reds=__webpack_require__(3197),turbo=__webpack_require__(3198),viridis=__webpack_require__(3199),cividis=__webpack_require__(3200),rainbow=__webpack_require__(3228),BuGn=__webpack_require__(3201),BuPu=__webpack_require__(3202),GnBu=__webpack_require__(3203),OrRd=__webpack_require__(3204),PuBuGn=__webpack_require__(3205),PuBu=__webpack_require__(3206),PuRd=__webpack_require__(3207),RdPu=__webpack_require__(3208),YlGnBu=__webpack_require__(3209),YlGn=__webpack_require__(3210),YlOrBr=__webpack_require__(3211),YlOrRd=__webpack_require__(3212),sinebow=__webpack_require__(3213),BrBG=__webpack_require__(3214),PRGn=__webpack_require__(3215),PiYG=__webpack_require__(3216),PuOr=__webpack_require__(3217),RdBu=__webpack_require__(3218),RdGy=__webpack_require__(3219),RdYlBu=__webpack_require__(3220),RdYlGn=__webpack_require__(3221),Spectral=__webpack_require__(3222);const INTERPOLATORS={Blues:Blues.a,Greens:Greens.a,Greys:Greys.a,Oranges:Oranges.a,Purples:Purples.a,Reds:Reds.a,Turbo:turbo.a,Viridis:viridis.a,Inferno:viridis.b,Magma:viridis.c,Plasma:viridis.d,Cividis:cividis.a,Warm:rainbow.c,Cool:rainbow.a,BuGn:BuGn.a,BuPu:BuPu.a,GnBu:GnBu.a,OrRd:OrRd.a,PuBuGn:PuBuGn.a,PuBu:PuBu.a,PuRd:PuRd.a,RdPu:RdPu.a,YlGnBu:YlGnBu.a,YlGn:YlGn.a,YlOrBr:YlOrBr.a,YlOrRd:YlOrRd.a,Rainbow:rainbow.b,Sinebow:sinebow.a,HSL:function interpolateHsl(t){return Object(src_color.e)(360*t,1,.5).formatRgb()},BrBG:BrBG.a,PRGn:PRGn.a,PiYG:PiYG.a,PuOr:PuOr.a,RdBu:RdBu.a,RdGy:RdGy.a,RdYlBu:RdYlBu.a,RdYlGn:RdYlGn.a,Spectral:Spectral.a},GRADIENT_RANGE=Object(lodash_es_range.a)(0,1.05,.05);function getLinearGradient(interpolator,direction,minMaxOnly=!1){const colorStops=function getColorStops(interpolator,minMaxOnly){if(minMaxOnly){const min=interpolator(0),max=interpolator(1);return"".concat(min,", ").concat(min," 50%, ").concat(max," 50%, ").concat(max)}return GRADIENT_RANGE.map(interpolator).join(", ")}(interpolator,minMaxOnly);return"linear-gradient(to ".concat(direction,", ").concat(colorStops,")")}function getInterpolator(colorMap,reverse){const interpolator=INTERPOLATORS[colorMap];return reverse?t=>interpolator(1-t):interpolator}const utils_formatValue=Object(defaultLocale.a)(".3~e");Object(defaultLocale.a)(".5~e");function ColorBar(props){const{domain:domain,scaleType:scaleType,colorMap:colorMap,horizontal:horizontal,withBounds:withBounds,invertColorMap:invertColorMap}=props,[gradientRef,gradientBox]=Object(useMeasure.a)(),{height:gradientHeight,width:gradientWidth}=gradientBox,gradientLength=horizontal?gradientWidth:gradientHeight,Axis=horizontal?AxisBottom.a:AxisRight.a,isEmptyDomain=domain[0]===domain[1],axisScale=Object(utils.e)({domain:domain,range:horizontal?[0,gradientWidth]:[gradientHeight,0],type:scaleType});return Object(jsx_runtime.jsxs)("div",{className:ColorBar_module_default.a.colorBar,"data-horizontal":horizontal||void 0,children:[withBounds&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("p",{className:ColorBar_module_default.a.minBound,children:isEmptyDomain?"−∞":utils_formatValue(domain[0])}),Object(jsx_runtime.jsx)("p",{className:ColorBar_module_default.a.maxBound,children:isEmptyDomain?"+∞":utils_formatValue(domain[1])})]}),Object(jsx_runtime.jsx)("div",{ref:gradientRef,className:ColorBar_module_default.a.gradient,style:{backgroundImage:getLinearGradient(getInterpolator(colorMap,invertColorMap),horizontal?"right":"top",domain[0]===domain[1])}}),gradientLength>0&&Object(jsx_runtime.jsx)("svg",{className:ColorBar_module_default.a.axis,width:horizontal?"100%":"2.5em",height:horizontal?"2.5em":"100%",children:Object(jsx_runtime.jsx)(Axis,{scale:axisScale,hideAxisLine:!0,numTicks:Object(utils.b)(gradientLength),tickClassName:ColorBar_module_default.a.tick,tickFormat:axisScale.tickFormat(Object(utils.b)(gradientLength),".3~g")})})]})}var heatmap_ColorBar=ColorBar;try{ColorBar.displayName="ColorBar",ColorBar.__docgenInfo={description:"",displayName:"ColorBar",props:{domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"Domain"}},scaleType:{defaultValue:null,description:"",name:"scaleType",required:!0,type:{name:"enum",value:[{value:'"linear"'},{value:'"log"'},{value:'"symlog"'}]}},colorMap:{defaultValue:null,description:"",name:"colorMap",required:!0,type:{name:"enum",value:[{value:'"Viridis"'},{value:'"Blues"'},{value:'"Greens"'},{value:'"Greys"'},{value:'"Oranges"'},{value:'"Purples"'},{value:'"Reds"'},{value:'"Turbo"'},{value:'"Inferno"'},{value:'"Magma"'},{value:'"Plasma"'},{value:'"Cividis"'},{value:'"Warm"'},{value:'"Cool"'},{value:'"BuGn"'},{value:'"BuPu"'},{value:'"GnBu"'},{value:'"OrRd"'},{value:'"PuBuGn"'},{value:'"PuBu"'},{value:'"PuRd"'},{value:'"RdPu"'},{value:'"YlGnBu"'},{value:'"YlGn"'},{value:'"YlOrBr"'},{value:'"YlOrRd"'},{value:'"Rainbow"'},{value:'"Sinebow"'},{value:'"HSL"'},{value:'"BrBG"'},{value:'"PRGn"'},{value:'"PiYG"'},{value:'"PuOr"'},{value:'"RdBu"'},{value:'"RdGy"'},{value:'"RdYlBu"'},{value:'"RdYlGn"'},{value:'"Spectral"'}]}},horizontal:{defaultValue:null,description:"",name:"horizontal",required:!1,type:{name:"boolean"}},withBounds:{defaultValue:null,description:"",name:"withBounds",required:!1,type:{name:"boolean"}},invertColorMap:{defaultValue:null,description:"",name:"invertColorMap",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/heatmap/ColorBar.tsx#ColorBar"]={docgenInfo:ColorBar.__docgenInfo,name:"ColorBar",path:"src/h5web/vis-packs/core/heatmap/ColorBar.tsx#ColorBar"})}catch(__react_docgen_typescript_loader_error){}const SCALE_FUNC={[models.b.Linear]:val=>val,[models.b.Log]:Math.log10,[models.b.SymLog]:val=>Math.sign(val)*Math.log10(1+Math.abs(val))},CMAP_NORM={[models.b.Linear]:0,[models.b.Log]:1,[models.b.SymLog]:2};function Mesh(props){const{rows:rows,cols:cols,values:values,domain:domain,colorMap:colorMap,scaleType:scaleType,invertColorMap:invertColorMap=!1}=props,scaledDomain=domain.map(SCALE_FUNC[scaleType]),shader={uniforms:{data:{value:Object(react.useMemo)(()=>{const valuesArr=Float32Array.from(values);return new three_module.DataTexture(valuesArr,cols,rows,three_module.RedFormat,three_module.FloatType)},[cols,rows,values])},colorMap:{value:Object(react.useMemo)(()=>{const interpolator=getInterpolator(colorMap,invertColorMap),colors=Uint8Array.from(Array.from({length:256}).flatMap((_,i)=>{const{r:r,g:g,b:b}=Object(src_color.f)(interpolator(i/255));return[r,g,b]}));return new three_module.DataTexture(colors,256,1,three_module.RGBFormat,three_module.UnsignedByteType)},[colorMap,invertColorMap])},scaleType:{value:CMAP_NORM[scaleType]},min:{value:scaledDomain[0]},oneOverRange:{value:1/(scaledDomain[1]-scaledDomain[0])}},vertexShader:"\n      varying vec2 coords;\n\n      void main() {\n        coords = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n    ",fragmentShader:"\n      uniform sampler2D data;\n      uniform sampler2D colorMap;\n      uniform int scaleType;\n      uniform float min;\n      uniform float oneOverRange;\n\n      const float oneOverLog10 = 0.43429448190325176;\n      const vec4 nanColor = vec4(255, 255, 255, 1);\n\n      varying vec2 coords;\n\n      float symlog(float x) {\n        return sign(x) * log(1. + abs(x)) * oneOverLog10;\n      }\n\n      float scale(float value) {\n        if (scaleType == 1) {\n          return oneOverRange * (log(value) * oneOverLog10 - min); // Log\n        }\n\n        if (scaleType == 2) {\n          return oneOverRange * (symlog(value) - min); // SymLog\n        }\n\n        return oneOverRange * (value - min); // Linear\n      }\n\n      void main() {\n        float value = texture2D(data, coords).r;\n\n        if (scaleType == 1 && value <= 0.) {\n          gl_FragColor = nanColor;\n        } else {\n          gl_FragColor = texture2D(colorMap, vec2(scale(value), 0.5));\n        }\n      }\n    "},{width:width,height:height}=Object(react_three_fiber_esm.e)(state=>state.size);return Object(jsx_runtime.jsxs)("mesh",{children:[Object(jsx_runtime.jsx)("planeGeometry",{args:[width,height]}),Object(jsx_runtime.jsx)("shaderMaterial",{args:[shader]})]})}var heatmap_Mesh=Object(react.memo)(Mesh);try{Mesh.displayName="Mesh",Mesh.__docgenInfo={description:"",displayName:"Mesh",props:{rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"number"}},cols:{defaultValue:null,description:"",name:"cols",required:!0,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"Domain"}},colorMap:{defaultValue:null,description:"",name:"colorMap",required:!0,type:{name:"enum",value:[{value:'"Viridis"'},{value:'"Blues"'},{value:'"Greens"'},{value:'"Greys"'},{value:'"Oranges"'},{value:'"Purples"'},{value:'"Reds"'},{value:'"Turbo"'},{value:'"Inferno"'},{value:'"Magma"'},{value:'"Plasma"'},{value:'"Cividis"'},{value:'"Warm"'},{value:'"Cool"'},{value:'"BuGn"'},{value:'"BuPu"'},{value:'"GnBu"'},{value:'"OrRd"'},{value:'"PuBuGn"'},{value:'"PuBu"'},{value:'"PuRd"'},{value:'"RdPu"'},{value:'"YlGnBu"'},{value:'"YlGn"'},{value:'"YlOrBr"'},{value:'"YlOrRd"'},{value:'"Rainbow"'},{value:'"Sinebow"'},{value:'"HSL"'},{value:'"BrBG"'},{value:'"PRGn"'},{value:'"PiYG"'},{value:'"PuOr"'},{value:'"RdBu"'},{value:'"RdGy"'},{value:'"RdYlBu"'},{value:'"RdYlGn"'},{value:'"Spectral"'}]}},scaleType:{defaultValue:null,description:"",name:"scaleType",required:!0,type:{name:"enum",value:[{value:'"linear"'},{value:'"log"'},{value:'"symlog"'}]}},invertColorMap:{defaultValue:null,description:"",name:"invertColorMap",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/heatmap/Mesh.tsx#Mesh"]={docgenInfo:Mesh.__docgenInfo,name:"Mesh",path:"src/h5web/vis-packs/core/heatmap/Mesh.tsx#Mesh"})}catch(__react_docgen_typescript_loader_error){}Object(createMemo.a)((function getVisDomain(customDomain,dataDomain){var _customDomain$,_customDomain$2;return[null!==(_customDomain$=customDomain[0])&&void 0!==_customDomain$?_customDomain$:dataDomain[0],null!==(_customDomain$2=customDomain[1])&&void 0!==_customDomain$2?_customDomain$2:dataDomain[1]]})),Object(createMemo.a)((function getSafeDomain(domain,fallbackDomain,scaleType){if(domain[0]>domain[1])return[fallbackDomain,{minGreater:!0}];if(scaleType!==models.b.Log)return[domain,{}];const[min,max]=domain,logSafeMin=min<=0?fallbackDomain[0]:min,logSafeMax=max<=0?fallbackDomain[1]:max,logSafeMinGreater=logSafeMin>logSafeMax;return[[logSafeMinGreater?logSafeMax:logSafeMin,logSafeMax],{minError:logSafeMinGreater?models.a.CustomMaxFallback:min<=0?models.a.InvalidMinWithLog:void 0,maxError:max<=0?models.a.InvalidMaxWithLog:void 0}]}));const useAxisValues=Object(createMemo.a)((function getAxisValues(rawValues,pixelCount){if(!rawValues)return Object(lodash_es_range.a)(pixelCount+1);if(rawValues.length===pixelCount+1)return rawValues;if(rawValues.length===pixelCount){const deltaCoord=rawValues[1]-rawValues[0];return[...rawValues,rawValues[rawValues.length-1]+deltaCoord]}throw new Error("Expected array to have length ".concat(pixelCount," or ").concat(pixelCount+1,", not ").concat(rawValues.length))}));function HeatmapVis(props){const{dataArray:dataArray,domain:domain=utils.a,colorMap:colorMap="Viridis",scaleType:scaleType=models.b.Linear,keepAspectRatio:keepAspectRatio=!0,showGrid:showGrid=!1,invertColorMap:invertColorMap=!1,title:title,abscissaParams:abscissaParams={},ordinateParams:ordinateParams={}}=props,{label:abscissaLabel,value:abscissaValue}=abscissaParams,{label:ordinateLabel,value:ordinateValue}=ordinateParams,{rows:rows,cols:cols}=function getDims(dataArray){const[rows,cols]=dataArray.shape;return{rows:rows,cols:cols}}(dataArray),aspectRatio=keepAspectRatio?cols/rows:void 0,abscissas=useAxisValues(abscissaValue,cols),abscissaDomain=useDomain(abscissas);Object(guards.e)(abscissaDomain,"Abscissas have undefined domain");const ordinates=useAxisValues(ordinateValue,rows),ordinateDomain=useDomain(ordinates);Object(guards.e)(ordinateDomain,"Ordinates have undefined domain");const tooltipFormatters=function hooks_useTooltipFormatters(abscissas,ordinates,abscissaLabel,ordinateLabel,dataArray){const abscissaToIndex=useValueToIndexScale(abscissas),ordinateToIndex=useValueToIndexScale(ordinates);return{formatIndex:([x,y])=>"".concat(abscissaLabel||"x","=").concat(abscissas[abscissaToIndex(x)],", ")+"".concat(ordinateLabel||"y","=").concat(ordinates[ordinateToIndex(y)]),formatValue:([x,y])=>Object(defaultLocale.a)(".3")(dataArray.get(ordinateToIndex(y),abscissaToIndex(x)))}}(abscissas,ordinates,abscissaLabel,ordinateLabel,dataArray);return Object(jsx_runtime.jsxs)("figure",{className:HeatmapVis_module_default.a.root,"aria-labelledby":"vis-title",children:[Object(jsx_runtime.jsxs)(shared_VisCanvas,{abscissaConfig:{domain:abscissaDomain,showGrid:showGrid,isIndexAxis:!abscissaValue,label:abscissaLabel},ordinateConfig:{domain:ordinateDomain,showGrid:showGrid,isIndexAxis:!ordinateValue,label:ordinateLabel},aspectRatio:aspectRatio,canvasTitle:title,children:[Object(jsx_runtime.jsx)(shared_TooltipMesh,{...tooltipFormatters,guides:"both"}),Object(jsx_runtime.jsx)(shared_PanZoomMesh,{}),Object(jsx_runtime.jsx)(heatmap_Mesh,{rows:rows,cols:cols,values:dataArray.data,domain:domain,colorMap:colorMap,invertColorMap:invertColorMap,scaleType:scaleType})]}),Object(jsx_runtime.jsx)(heatmap_ColorBar,{domain:domain,scaleType:scaleType,colorMap:colorMap,invertColorMap:invertColorMap,withBounds:!0})]})}var heatmap_HeatmapVis=HeatmapVis;try{HeatmapVis.displayName="HeatmapVis",HeatmapVis.__docgenInfo={description:"",displayName:"HeatmapVis",props:{dataArray:{defaultValue:null,description:"",name:"dataArray",required:!0,type:{name:"ndarray<number>"}},domain:{defaultValue:null,description:"",name:"domain",required:!0,type:{name:"Domain | undefined"}},colorMap:{defaultValue:null,description:"",name:"colorMap",required:!1,type:{name:'"Viridis" | "Blues" | "Greens" | "Greys" | "Oranges" | "Purples" | "Reds" | "Turbo" | "Inferno" | "Magma" | "Plasma" | "Cividis" | "Warm" | "Cool" | "BuGn" | "BuPu" | "GnBu" | "OrRd" | ... 20 more ...'}},scaleType:{defaultValue:null,description:"",name:"scaleType",required:!1,type:{name:"ScaleType"}},keepAspectRatio:{defaultValue:null,description:"",name:"keepAspectRatio",required:!1,type:{name:"boolean"}},showGrid:{defaultValue:null,description:"",name:"showGrid",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},invertColorMap:{defaultValue:null,description:"",name:"invertColorMap",required:!1,type:{name:"boolean"}},abscissaParams:{defaultValue:null,description:"",name:"abscissaParams",required:!1,type:{name:"AxisParams"}},ordinateParams:{defaultValue:null,description:"",name:"ordinateParams",required:!1,type:{name:"AxisParams"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/h5web/vis-packs/core/heatmap/HeatmapVis.tsx#HeatmapVis"]={docgenInfo:HeatmapVis.__docgenInfo,name:"HeatmapVis",path:"src/h5web/vis-packs/core/heatmap/HeatmapVis.tsx#HeatmapVis"})}catch(__react_docgen_typescript_loader_error){}var providers_models=__webpack_require__(21),complex=__webpack_require__(327),complex_default=__webpack_require__.n(complex);const arr1=Object(lodash_es_range.a)(-20,21),arr2=Object(lodash_es_range.a)(0,100,5),arr3=Object(lodash_es_range.a)(-1,1.25,.25),arr4=Object(lodash_es_range.a)(10,40,10),oneD=arr1.map(val=>val**2),twoD=arr2.map(offset=>oneD.map(val=>val-offset)),threeD=arr3.map(multiplier=>twoD.map(arrOneD=>arrOneD.map(val=>val*multiplier))),fourD=arr4.map(divider=>threeD.map(arrTwoD=>arrTwoD.map(arrOneD=>arrOneD.map(val=>Math.sin(val/divider))))),mockValues={null:null,raw:{int:42},raw_large:{str:".".repeat(1e3)},scalar_int:0,scalar_str:"foo",scalar_bool:!0,oneD_linear:arr1,oneD:oneD,twoD:twoD,twoD_spectrum:twoD,secondary:twoD.map(inner=>inner.map(v=>2*v)),tertiary:twoD.map(inner=>inner.map(v=>v/2)),threeD:threeD,fourD:fourD,X:arr1,Y:arr2,X_log:arr1.map((_,i)=>.1*(i+1)),title_twoD:"NeXus 2D",oneD_str:["foo","bar"],errors_twoD:arr2.map(offset=>arr1.map(val=>Math.abs(val-offset))),fourD_image:fourD,oneD_errors:oneD.map(x=>Math.abs(x)/10),threeD_bool:[[[!0,!1,!0,!1],[!0,!0,!0,!0],[!1,!1,!1,!1]],[[!0,!1,!1,!1],[!0,!0,!0,!0],[!1,!1,!0,!1]]],scalar_cplx:new complex_default.a(1,5),twoD_cplx:[[new complex_default.a(0,-5),new complex_default.a(-2.1,-2)],[new complex_default.a(5,0),new complex_default.a(-3,.1)]]},intType={class:providers_models.a.Integer,endianness:providers_models.b.LE,size:32},floatType=(providers_models.a.Unsigned,providers_models.b.LE,{class:providers_models.a.Float,endianness:providers_models.b.LE,size:64}),stringType={class:providers_models.a.String,charSet:"ASCII"},compoundType={class:providers_models.a.Compound,fields:{int:intType}},booleanType={class:providers_models.a.Bool},complexType={class:providers_models.a.Complex,realType:floatType,imagType:floatType};function makeAttr(name,type,shape,value){return{name:name,type:type,shape:shape,value:value}}function makeScalarAttr(name,type,value){return makeAttr(name,type,[],value)}function makeStrAttr(name,value){return makeScalarAttr(name,stringType,value)}function makeGroup(name,children=[],opts={}){const{attributes:attributes=[],link:link,isRoot:isRoot=!1}=opts,path=isRoot?"/":"/".concat(name),group={name:name,path:path,kind:providers_models.c.Group,children:children,attributes:attributes,link:link};return function prefixChildrenPaths(group,parentPath){group.children.forEach(c=>{c.path=function buildEntityPath(parentPath,entityNameOrRelativePath){return"".concat("/"===parentPath?"":parentPath,"/").concat(entityNameOrRelativePath)}(parentPath,c.path.slice(1)),Object(guards.i)(c)&&prefixChildrenPaths(c,parentPath)})}(group,path),group}function makeDataset(name,type,shape,opts={}){const{attributes:attributes=[],valueId:valueId=name,link:link}=opts;return{name:name,path:"/".concat(name),kind:providers_models.c.Dataset,attributes:attributes,shape:shape,type:type,value:mockValues[valueId],link:link}}function makeScalarDataset(name,type,opts={}){return makeDataset(name,type,[],opts)}function makeUnresolvedEntity(name,linkClass,pathToEntity,file){return{name:name,path:"/".concat(name),kind:providers_models.c.Unresolved,attributes:[],link:{class:linkClass,file:file,path:pathToEntity}}}function makeNxAxesAttr(axes){return makeAttr("axes",stringType,[axes.length],axes)}function makeSilxStyleAttr(style){const{signalScaleType:signalScaleType,axesScaleType:axesScaleType}=style;return makeStrAttr("SILX_style",JSON.stringify({signal_scale_type:signalScaleType,axes_scale_type:axesScaleType}))}function makeNxGroup(name,type,opts={}){const{defaultPath:defaultPath,children:children,...groupOpts}=opts;return makeGroup(name,children,{...groupOpts,attributes:[...groupOpts.attributes||[],makeStrAttr("NX_class",type),...defaultPath?[makeStrAttr("default",defaultPath)]:[]]})}function makeNxDataGroup(name,opts){const{signal:signal,title:title,errors:errors,silxStyle:silxStyle,axes:axes={},axesAttr:axesAttr,auxiliary:auxiliary={},auxAttr:auxAttr,...groupOpts}=opts;return makeNxGroup(name,"NXdata",{...groupOpts,attributes:[...groupOpts.attributes||[],makeStrAttr("signal",signal.name),...axesAttr?[makeNxAxesAttr(axesAttr)]:[],...silxStyle?[makeSilxStyleAttr(silxStyle)]:[],...auxAttr?[(aux=auxAttr,makeAttr("auxiliary_signals",stringType,[aux.length],aux))]:[]],children:[signal,...title?[title]:[],...errors?[errors]:[],...Object.values(axes),...Object.values(auxiliary)]});var aux}function makeNxDataset(name,type,dims,opts={}){const{interpretation:interpretation,longName:longName,units:units,...datasetOpts}=opts;return makeDataset(name,type,dims,{...datasetOpts,attributes:[...datasetOpts.attributes||[],...interpretation?[makeStrAttr("interpretation",interpretation)]:[],...longName?[makeStrAttr("long_name",longName)]:[],...units?[makeStrAttr("units",units)]:[]]})}const mockMetadata=makeNxGroup("source.h5","NXroot",{isRoot:!0,defaultPath:"nexus_entry",children:[makeGroup("entities",[makeGroup("empty_group"),makeDataset("empty_dataset",intType,null),function makeDatatype(name,type,opts={}){const{attributes:attributes=[],link:link}=opts;return{name:name,path:"/".concat(name),kind:providers_models.c.Datatype,attributes:attributes,type:type,link:link}}("datatype",compoundType),makeScalarDataset("raw",compoundType),makeScalarDataset("raw_large",compoundType),makeScalarDataset("scalar_int",intType),makeScalarDataset("scalar_str",stringType),makeScalarDataset("scalar_bool",booleanType),makeScalarDataset("scalar_cplx",complexType),makeUnresolvedEntity("unresolved_hard_link","Hard"),makeUnresolvedEntity("unresolved_soft_link","Soft","/foo"),makeUnresolvedEntity("unresolved_external_link","External","entry_000/dataset","my_file.h5")]),makeGroup("nD_datasets",[makeDataset("oneD_linear",intType,[41]),makeDataset("oneD",intType,[41]),makeDataset("twoD",intType,[20,41]),makeDataset("twoD_cplx",complexType,[2,2]),makeDataset("threeD",intType,[9,20,41]),makeDataset("threeD_bool",booleanType,[2,3,4]),makeDataset("fourD",intType,[3,9,20,41])]),makeNxGroup("nexus_entry","NXentry",{defaultPath:"nx_process/nx_data",children:[makeNxGroup("nx_process","NXprocess",{children:[makeNxDataGroup("nx_data",{signal:makeNxDataset("twoD",intType,[20,41]),silxStyle:{signalScaleType:models.b.SymLog},title:makeScalarDataset("title",stringType,{valueId:"title_twoD"})}),makeNxGroup("absolute_default_path","NXentry",{defaultPath:"/nexus_entry/nx_process/nx_data"})]}),makeNxDataGroup("spectrum",{signal:makeNxDataset("twoD_spectrum",intType,[20,41],{interpretation:"spectrum",units:"arb. units"}),errors:makeNxDataset("errors",floatType,[20,41],{valueId:"errors_twoD"}),axes:{X:makeNxDataset("X",intType,[41],{units:"nm"})},axesAttr:[".","X"]}),makeNxDataGroup("image",{signal:makeNxDataset("fourD_image",intType,[3,9,20,41],{longName:"Interference fringes",interpretation:"image"}),axes:{X:makeNxDataset("X",intType,[41],{units:"nm"}),Y:makeNxDataset("Y",intType,[20],{units:"deg",longName:"Angle (degrees)"})},axesAttr:[".",".","Y","X"],silxStyle:{signalScaleType:models.b.Log}}),makeNxDataGroup("log_spectrum",{signal:makeNxDataset("oneD",intType,[41]),errors:makeNxDataset("oneD_errors",intType,[41]),axes:{X_log:makeNxDataset("X_log",floatType,[41])},axesAttr:["X_log"],silxStyle:{signalScaleType:models.b.Log,axesScaleType:[models.b.Log]}}),makeNxDataGroup("spectrum_with_aux",{signal:makeNxDataset("twoD_spectrum",intType,[20,41],{interpretation:"spectrum",units:"arb. units"}),errors:makeNxDataset("errors",floatType,[20,41],{valueId:"errors_twoD"}),axes:{X:makeNxDataset("X",intType,[41],{units:"nm"})},axesAttr:[".","X"],auxiliary:{secondary:makeNxDataset("secondary",intType,[20,41]),tertiary:makeNxDataset("tertiary",intType,[20,41])},auxAttr:["secondary","tertiary"]})]}),makeGroup("nexus_malformed",[makeGroup("default_not_string",[],{attributes:[makeScalarAttr("default",intType,42)]}),makeGroup("default_not_found",[],{attributes:[makeStrAttr("default","/test")]}),makeGroup("no_signal",[],{attributes:[makeStrAttr("NX_class","NXdata")]}),makeGroup("signal_not_found",[],{attributes:[makeStrAttr("NX_class","NXdata"),makeStrAttr("signal","unknown")]})])]});var ndarray=__webpack_require__(143),ndarray_default=__webpack_require__.n(ndarray);function assertMockDataset(entity){if(!function isMockDataset(entity){return Object(guards.g)(entity)&&"value"in entity}(entity))throw new Error("Expected mock dataset")}function getMockDataArray(path){const dataset=function findMockEntity(path){if(Object(guards.a)(path),"/"===path)return mockMetadata;const entity=path.slice(1).split("/").reduce((parentEntity,currSegment)=>parentEntity&&Object(guards.i)(parentEntity)?function getChildEntity(group,entityName){return group.children.find(child=>child.name===entityName)}(parentEntity,currSegment):void 0,mockMetadata);return Object(guards.e)(entity,'Expected entity at path "'.concat(path,'"')),entity}(path);assertMockDataset(dataset);const{value:value}=dataset;return Object(guards.b)(value),Object(guards.f)(dataset),Object(guards.c)(dataset),ndarray_default()(value.flat(1/0),dataset.shape)}}},[[1683,2,3]]]);